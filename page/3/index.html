<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>书格前端</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="书格前端">
<meta property="og:url" content="https://blog.bookcell.org/page/3/index.html">
<meta property="og:site_name" content="书格前端">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Perry">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="书格前端" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">书格前端</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">潘绳杰的博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.bookcell.org"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-learn-redux-by-build-a-redux" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/04/learn-redux-by-build-a-redux/" class="article-date">
  <time class="dt-published" datetime="2019-08-04T14:47:26.000Z" itemprop="datePublished">2019-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/04/learn-redux-by-build-a-redux/">通过从零实现redux来学习redux的原理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>理解Redux的原理，一个比较好的方式就是自己实现一个Redux，这样便知道它背后的原理以及对应的API。</p>
<p>这里主要是参考<a target="_blank" rel="noopener" href="https://levelup.gitconnected.com/learn-redux-by-building-redux-from-scratch-dcbcbd31b0d0">Learn Redux by Building Redux from Scratch</a><br>这篇文章，并且使用意译，并非完全按照原文翻译，不过不影响对redux原理的理解，跟着文章的思路实现一遍redux就能了解背后的基本思路。</p>
<p>欢迎访问博客原文<a href="https://blog.bookcell.org/2019/08/04/learn-redux-by-build-a-redux/">通过从零实现redux来学习redux</a></p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Redux的核心概念:</p>
<blockquote>
<p>Redux is a predictable state container for JavaScript apps.</p>
</blockquote>
<p>也就是说Redux是JavaScript应用中作为一个可预测的状态容器的存在。</p>
<p>Redux通常用于保存应用状态，应用状态由两部分输入组成:</p>
<ol>
<li>从服务端异步请求的数据</li>
<li>用户在UI上的交互</li>
</ol>
<p>Redux在<code>store</code>（仓库）中管理应用状态。状态本身只是一个纯粹的JavaScript对象。仓库另外提供方法来<br>更新状态和读取状态。</p>
<p>Redux的核心在于基于观察者模式下的发布订阅模式，有点类似在JS中的事件驱动架构。在Redux中，当用<br>户和UI交互时，会派发（dispatch）一个<code>action</code>（也就是发布）。<code>action</code>的概念不需要过度考虑，它<br>仅仅只是一个纯JS对象，包含一个<code>type</code>作为唯一键值和一个<code>payload</code>负载数据。</p>
<p>使用<code>action</code>，状态可以根据接收到的<code>type</code>和<code>payload</code>进行更新。组件可以订阅状态的变化，并基于<br>新的状态树更新UI。</p>
<p>一个数据流的简单表示如下:</p>
<p>用户交互发布一个<code>action</code> -&gt; <code>reducer</code>更新状态 -&gt; 订阅组件基于新状态更新UI</p>
<p>基于这个概念，Redux有3个核心的原则:</p>
<ol>
<li>单一数据源。整个UI的状态只有一个对象驱动。</li>
<li>状态是只读的。视图和异步回调均不能直接改写状态。状态只有在触发一个纯JS对象的<code>action</code>作为<br><code>reducer</code>的参数来进行修改。</li>
<li>改动是有纯函数执行的。<code>reducer</code>函数接收前一个状态（也是纯对象），并基于前一个状态和<code>action</code><br>创建一个新的状态。你只能返回一个新的对象，永远不要修改当前的状态。</li>
</ol>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>Redux是围绕着<code>store</code>为核心的。<code>store</code>是一个包含状态、更新方法(<code>dispatch()</code>)和读取方<br>法(<code>subscribe()/getState()</code>)的JavaScript对象。还有<code>listeners</code>（监听器）用于组件订阅状态<br>变化执行的函数。</p>
<p><code>store</code>形式如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = &#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;&#125;, <span class="comment">// 状态是一个对象</span></span><br><span class="line">    <span class="attr">listners</span>: [], <span class="comment">// 监听器是一个函数数组</span></span><br><span class="line">    <span class="attr">dispatch</span>: <span class="function">() =&gt;</span> &#123;&#125;, <span class="comment">// dispatch是一个函数</span></span><br><span class="line">    <span class="attr">subscribe</span>: <span class="function">() =&gt;</span> &#123;&#125;, <span class="comment">// subscribe是一个函数</span></span><br><span class="line">    <span class="attr">getState</span>: <span class="function">() =&gt;</span> &#123;&#125;, <span class="comment">// getState是一个函数</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>为了使用这个仓库对象来管理状态，我们要够一个<code>createStore()</code>函数，代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">createStore</span> = (<span class="params">reducer, initialState</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> store = &#123;&#125;;</span><br><span class="line">    store.<span class="property">state</span> = initialState;</span><br><span class="line">    store.<span class="property">listners</span> = [];</span><br><span class="line">    </span><br><span class="line">    store.<span class="property">getState</span> = <span class="function">() =&gt;</span> store.<span class="property">state</span>;</span><br><span class="line">    </span><br><span class="line">    store.<span class="property">subscribe</span> = <span class="function">(<span class="params">listner</span>) =&gt;</span> &#123;</span><br><span class="line">        store.<span class="property">listners</span>.<span class="title function_">push</span>(listener);</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    store.<span class="property">dispatch</span> = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        store.<span class="property">state</span> = <span class="title function_">reducer</span>(store.<span class="property">state</span>, action);</span><br><span class="line">        store.<span class="property">listeners</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> <span class="title function_">listener</span>());</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> store;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>createStore</code>函数接收两个参数，一个是<code>reducer</code>和一个<code>initialState</code>。reducer函数会在后续<br>详细介绍，现在只要知道这是一个指示状态应该如何更新的函数。</p>
<p><code>createStore</code>函数开始于创建一个<code>store</code>对象。然后通过<code>store.state = initialState</code>进行初<br>始化，如果开发者没有提供则值会是<code>undefined</code>。<code>state.listeners</code>会被初始化为空数组。</p>
<p><code>store</code>中定义的第一个函数是<code>getState()</code>。当调用时只是返回状态，<br><code>store.getState = () =&gt; store.state</code>。</p>
<p>我们允许UI订阅(subscribe)状态的变化。订阅实际上是传递一个函数给<code>subscribe</code>方法，并且这个<br>函数作为监听器会被添加到监听器数组中。<code>typeof listener === &#39;function&#39;</code>的结果是<code>true</code>。</p>
<p>在每一个状态变化的时候，我们会遍历所有的监听器函数数组，并逐个执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="property">listeners</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> <span class="title function_">listener</span>());</span><br></pre></td></tr></table></figure>

<p>接下来，定义了<code>dispatch</code>函数。dispatch函数是当用户和UI交互时，组件进行调用的。dispatch接收<br>一个单一的<code>action</code>对象参数。这个<code>action</code>应该要完全描述用户接收到的交互。action和当前状态一起，<br>会被传递到<code>reducer</code>函数，并且返回一个新的状态。</p>
<p>在新的状态被<code>reducer</code>创建后，监听器数组会被遍历，并且每个函数会执行。通常，<code>getState</code>函数<br>在监听器函数内部会被调用，因为监听的目的是响应状态变化。</p>
<p>注意到数据流向是一个非常线性和同步的过程。监听器函数添加到一个单独的监听器数组中。当用户<br>和应用交互时，会产生一个用于dispatch的action。这个action会创建一个可预测和独立的状态改变。<br>接着这个监听器数组被遍历，让每个监听器函数被调用。</p>
<p>这个过程是一个单向的数据流。只有一个途径在应用中创建和响应数据变化。没有什么特别的技巧发生，<br>只是一步一步针对交互并遵循明确统一模式的路径。</p>
<h3 id="Reducer函数"><a href="#Reducer函数" class="headerlink" title="Reducer函数"></a>Reducer函数</h3><p>reducer是一个接收<code>state</code>和<code>action</code>的函数，并返回新的状态。形式如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">reducer</span> = (<span class="params">prevState, action</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> nextState = &#123;&#125;; <span class="comment">// 一个表示新状态的对象</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// 使用前一个状态和action创建新状态的代码</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> nextState;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这里的<code>prevState</code>, <code>nextState</code>和<code>action</code>都是JavaScript对象。</p>
<p>让我们详细看一下<code>action</code>对象来理解它是如何用于更新状态的。我们知道一个action会包含<br>一个唯一的字符串<code>type</code>来标识由用户触发的交互。</p>
<p>例如，假设你使用Redux来创建一个简单的todo list应用。当用户点击提交按钮来添加项目到列表中时，<br>将会触发一个带有<code>ADD_TODO</code>类型的action。这是一个既对人类可读和理解，并且对Redux关于aciton目的<br>也是清晰的指示。当添加一个项目时，它将会包含一个<code>text</code>的todo内容作为负载(payload)。因此，<br>添加一个todo到列表中，可以通过以下的action对象来完全表示:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todoAction = &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;ADD_TODO&#x27;</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;Get milk from the store&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>现在我们可以构建一个reducer来支撑一个todo应用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getInitialState</span> = (<span class="params"></span>) =&gt; (&#123;</span><br><span class="line">    <span class="attr">todoList</span>: []</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">reducer</span> = (<span class="params">prevState = getInitialState(), action</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;ADD_TODO&#x27;</span>:</span><br><span class="line">            <span class="keyword">const</span> nextState = &#123;</span><br><span class="line">                <span class="attr">todoList</span>: [</span><br><span class="line">                    ...prevState.<span class="property">todoList</span>,</span><br><span class="line">                    action.<span class="property">text</span>,</span><br><span class="line">                ],</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> nextState;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> prevState;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(store.getState()) = &#123; todoList: [] &#125;;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// store.dispatch(&#123;</span></span><br><span class="line"><span class="comment">//  type: &#x27;ADD_TODO&#x27;,</span></span><br><span class="line"><span class="comment">//  text: &#x27;Get milk from the store&#x27;,</span></span><br><span class="line"><span class="comment">//&#125;);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// console.log(store.getState()) =&gt; &#123; todoList: [&#x27;Get milk from the store&#x27;] &#125;</span></span><br></pre></td></tr></table></figure>

<p>注意每次reducer被调用的时候我们都会创建一个新的对象。我们使用前一次的状态，但是创建了一个<br>完整全新的状态。这是另一个非常重要的原则能够让redux可预测。通过将状态分割成离散的，开发者<br>可以精确的指导应用中会发生什么。这里只要了解根据状态的变化来重新渲染UI的特定部分即可。</p>
<p>你通常会看到在Redux中使用<code>switch</code>语句。这是匹配字符串比较方便的一个方法，在我们的例子中，<br>action的<code>type</code>为例，对应更新状态的代码块。这个使用<code>if...else</code>语句来写没有差别，如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (action.<span class="property">type</span> === <span class="string">&#x27;ADD_TODO&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextState = &#123;</span><br><span class="line">        <span class="attr">todoList</span>: [...prevState.<span class="property">todoList</span>, action.<span class="property">text</span>],</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> nextState;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> prevState;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Redux对于reducer中的内容实际上是无感知的。这是一个开发者定义的函数，用来创建一个新的状态。<br>实际上，用户控制了几乎所有——reducer，被使用的action，通过订阅被执行的监听器函数。Redux就<br>像一个夹层将这些内容进行联系起来，并提供一个通用的接口来和状态进行交互。</p>
<blockquote>
<p>如果你之前了解过<code>combineReducers</code>函数，这个只是一个用来允许你在<code>state</code>对象中创建隔离的<br>键值。主要为了让代码更整洁。详细的内容可以查看官方的资料。</p>
</blockquote>
<h2 id="构建一个简单应用"><a href="#构建一个简单应用" class="headerlink" title="构建一个简单应用"></a>构建一个简单应用</h2><p>上面已经讲了redux的全部核心内容，接下来可以用前面的实现来构建一个简单的计数器应用。</p>
<p>我们会创建一个HTML文档，并用给一个<code>&lt;div&gt;</code>来包含从我们的redux仓库中的count值。并且放置<br>一个script标签，并获取<code>id=&quot;count&quot;</code>的DOM节点。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            Random Count: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> counterNode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;count&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在<code>&lt;script&gt;</code>的计数器下方，我们要把<code>createStore</code>函数贴进来。在这个函数下面，我们会创建reducer。<br>这个reducer将会查找一个type为<code>&#39;COUNT&#39;</code>的action，并将action的负载中的count添加到原先保存在<br>仓库中的count。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getInitialState</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">reducer</span> = (<span class="params">state = getInitialState(), action</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;COUNT&#x27;</span>:</span><br><span class="line">            <span class="keyword">const</span> nextState = &#123;</span><br><span class="line">                <span class="attr">count</span>: state.<span class="property">count</span> + action.<span class="property">payload</span>.<span class="property">count</span>,</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> nextState;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>现在我们拥有一个reducer，我们可以创建仓库。使用这个新创建的仓库，我们可以订阅仓库中的变化。<br>每一次状态变化，我们可以从状态中读取<code>count</code>并写到DOM中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="title function_">crateStore</span>(reducer);</span><br><span class="line"></span><br><span class="line">store.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> state = store.<span class="title function_">getState</span>();</span><br><span class="line">    <span class="keyword">const</span> count = state.<span class="property">count</span>;</span><br><span class="line">    counterNode.<span class="property">innerHTML</span> = count;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>现在我们的应用正在监听状态的变化，让我们创建一个简单的事件监听器，来增加count。事件监听器<br>将会dispatch一个action，用于发送一个1-10的随机数作为count到reducer中去相加。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    store.<span class="title function_">dispatch</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;COUNT&#x27;</span>,</span><br><span class="line">        <span class="attr">payload</span>: &#123;</span><br><span class="line">            <span class="attr">count</span>: <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>最终，我们会dispatch一个空的action来初始化状态。由于没有action的类型，将会执行<code>default</code>代码<br>块，并从<code>getInittialState()</code>中返回的值来生成一个状态对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">dispatch</span>(&#123;&#125;); <span class="comment">// 设置初始状态</span></span><br></pre></td></tr></table></figure>

<p>将所有的代码放在一起，就有了以下的应用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-u&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>Random Count: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> counterNode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;count&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">createStore</span> = (<span class="params">reducer, initialState</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> store = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">                store.<span class="property">state</span> = initialState;</span></span><br><span class="line"><span class="language-javascript">                store.<span class="property">listeners</span> = [];</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                store.<span class="property">getState</span> = <span class="function">() =&gt;</span> store.<span class="property">state</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                store.<span class="property">subscribe</span> = <span class="function"><span class="params">listener</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    store.<span class="property">listeners</span>.<span class="title function_">push</span>(listener);</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                store.<span class="property">dispatch</span> = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&gt; Action&#x27;</span>, action);</span></span><br><span class="line"><span class="language-javascript">                    store.<span class="property">state</span> = <span class="title function_">reducer</span>(store.<span class="property">state</span>, action);</span></span><br><span class="line"><span class="language-javascript">                    store.<span class="property">listeners</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> <span class="title function_">listener</span>());</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> store;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">getInitialState</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">count</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">reducer</span> = (<span class="params">state = getInitialState(), action</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;COUNT&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> nextState = &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">count</span>: state.<span class="property">count</span> + action.<span class="property">payload</span>.<span class="property">count</span>,</span></span><br><span class="line"><span class="language-javascript">                        &#125;;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> nextState;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> state;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            store.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> state = store.<span class="title function_">getState</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> count = state.<span class="property">count</span>;</span></span><br><span class="line"><span class="language-javascript">                counterNode.<span class="property">innerHTML</span> = count;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 一个简单的事件用来dispatch变化</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---- Previous state&#x27;</span>, store.<span class="title function_">getState</span>());</span></span><br><span class="line"><span class="language-javascript">                store.<span class="title function_">dispatch</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;COUNT&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">payload</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">count</span>: <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>),</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;++++ New State&#x27;</span>, store.<span class="title function_">getState</span>());</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            store.<span class="title function_">dispatch</span>(&#123;&#125;); <span class="comment">// 设置初始化状态</span></span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最终代码可以从<a target="_blank" rel="noopener" href="https://github.com/perry2008084/knowledge/blob/master/React/redux/redux.html">我的代码仓库</a>下载，建议个人自己手动敲一遍，实践一遍加深理解。</p>
<p>代码运行后，通过每次点击页面，你可以看到页面上的count会增加一个随机数，并且在控制台会<br>打印状态的变化。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过上述的一个过程，你可以理解Redux的实现，并且将Redux使用在一个应用中。当然，上述的这个<br>实现还不能用在生产上，因为缺少边界考虑和优化。</p>
<p>如果看了一遍没有理解，也没有关系，重新从发布订阅开始看，结合实践，终会理解。</p>
<p>其他的材料可以参考redux作者Dan Abramov的<a target="_blank" rel="noopener" href="https://egghead.io/courses/getting-started-with-redux">视频教程</a>。关于什么时候和<br>为什么要使用redux进行状态管理，可以看Dan的这篇<a target="_blank" rel="noopener" href="https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367">文章</a>，比较redux和React内部的状态管理。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://levelup.gitconnected.com/learn-redux-by-building-redux-from-scratch-dcbcbd31b0d0">Learn Redux by Building Redux from Scratch</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/08/04/learn-redux-by-build-a-redux/" data-id="cl2oo8k92005v2224grdm3cnk" data-title="通过从零实现redux来学习redux的原理" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redux/" rel="tag">Redux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E7%90%86/" rel="tag">原理</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-dom-in-action" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/07/22/dom-in-action/" class="article-date">
  <time class="dt-published" datetime="2019-07-22T14:21:21.000Z" itemprop="datePublished">2019-07-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/07/22/dom-in-action/">DOM实战基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="DOM的概念"><a href="#DOM的概念" class="headerlink" title="DOM的概念"></a>DOM的概念</h2><ul>
<li><p>Document object model</p>
</li>
<li><p>Tree of nodes&#x2F;elements created by the browser</p>
</li>
<li><p>JavaScript can be used to read&#x2F;write&#x2F;manipulate to the DOM</p>
</li>
<li><p>Object Oriented Representation</p>
</li>
<li><p>文档对象模型</p>
</li>
<li><p>由浏览器创建的节点或者元素的一颗树结构</p>
</li>
<li><p>JavaScript可以对DOM进行读写操作</p>
</li>
<li><p>基于对象的表示</p>
</li>
</ul>
<h2 id="DOM常用的API和属性"><a href="#DOM常用的API和属性" class="headerlink" title="DOM常用的API和属性"></a>DOM常用的API和属性</h2><h3 id="DOM的基础属性"><a href="#DOM的基础属性" class="headerlink" title="DOM的基础属性"></a>DOM的基础属性</h3><ul>
<li><p>document.title: 标题</p>
</li>
<li><p>document.head: head节点</p>
</li>
<li><p>document.body: body节点</p>
</li>
<li><p>document.all: 所有节点的集合</p>
</li>
<li><p>document.forms: 所有表单节点集合</p>
</li>
<li><p>document.links: 所有链接节点集合</p>
</li>
<li><p>document.images: 所有图片节点集合</p>
</li>
<li><p>document.getElementById(): 通过id获取元素</p>
</li>
<li><p>document.getElementsByClassName(): 通过类名获取元素集合</p>
</li>
<li><p>document.getElementsByTagName(): 通过标签名获取元素集合</p>
</li>
<li><p>document.querySelector(): 类似于jQuery的$选择器函数，可以支持id、类名、标签名等，仅支持选择第一个匹配的元素</p>
</li>
<li><p>document.querySelectorAll(): 支持选择一个集合</p>
</li>
</ul>
<h3 id="DOM的遍历"><a href="#DOM的遍历" class="headerlink" title="DOM的遍历"></a>DOM的遍历</h3><ul>
<li>Element.parentNode: 父节点</li>
<li>Element.parentElement: 父元素，这个属性与parentNode大多数情况是相同的，除了父元素为Document或者DocumentFragment的情况</li>
<li>Element.childNodes: 子节点集合</li>
<li>Element.firstChild: 第一个子节点</li>
<li>Element.firstElementChild: 第一个元素子节点，这个与firstChild节点的区别在于会过滤空格、换行符等造成的节点</li>
<li>Element.lastChild: 最后一个子节点</li>
<li>Element.lastElementChild: 最后一个元素子节点，同样是过滤空格、换行符等造成的节点</li>
<li>Element.nextSibling: 下一个兄弟节点</li>
<li>Element.nextElementSibling: 下一个元素兄弟节点，同样是过滤空格、换行符等造成的节点</li>
<li>Element.previousSibling: 上一个兄弟节点</li>
<li>Element.previousElementSibling: 上一个元素兄弟节点，同样是过滤空格、换行符等造成的节点</li>
</ul>
<h3 id="DOM元素的创建"><a href="#DOM元素的创建" class="headerlink" title="DOM元素的创建"></a>DOM元素的创建</h3><ul>
<li>document.createElement(): 创建元素</li>
<li>Element.className: 设置类属性</li>
<li>Element.id: 设置id属性</li>
<li>Element.setAttribute(): 设置属性</li>
<li>document.createTextNode(): 创建文本节点</li>
<li>Element.appendChild(): 追加子节点</li>
<li>Element.insertBefore(newNode, referenceNode): 在引用节点前添加新的节点</li>
</ul>
<h2 id="DOM事件"><a href="#DOM事件" class="headerlink" title="DOM事件"></a>DOM事件</h2><ul>
<li>Element.addEventListener(): 添加事件添加</li>
<li>Event.target: 事件目标</li>
<li>Event.target.id, Event.target.className, Event.target.classList: 事件目标的id, class, class列表</li>
<li>Event.type: 事件类型</li>
<li>Event.clientX: 点击位置距离视口的横坐标</li>
<li>Event.clientY: 点击位置距离视口的纵坐标</li>
<li>Event.offsetX: 点击位置距离元素的横坐标</li>
<li>Event.offsetY: 点击位置距离元素的纵坐标</li>
<li>Event.altKey: 触发事件时是否按下Alt键</li>
<li>Event.ctrlKey: 触发事件时是否按下Ctrl键</li>
<li>Event.shiftKey: 触发事件时是否按下Shift键</li>
</ul>
<h3 id="DOM事件类型"><a href="#DOM事件类型" class="headerlink" title="DOM事件类型"></a>DOM事件类型</h3><ul>
<li>click: 点击事件</li>
<li>dbclick: 双击事件</li>
<li>mousedown: 鼠标按下</li>
<li>mouseup: 鼠标松开</li>
<li>mouseenter: 鼠标进入目标区域，不会冒泡并且，在后代元素上移动到当前元素不会触发(MDN参考:Similar to mouseover, it differs in that it doesn’t bubble and that it isn’t sent when the pointer is moved from one of its descendants’ physical space to its own physical space.)</li>
<li>mouseleave: 鼠标离开目标区域并包括所有子元素，不会冒泡(MDN参考: Similar to mouseout, it differs in that it doesn’t bubble and that it isn’t sent until the pointer has moved from its physical space and the one of all its descendants.)</li>
<li>mouseover: 鼠标经过目标区域，会冒泡</li>
<li>mouseout: 鼠标离开目标区域或其中的子元素</li>
<li>mousemove: 鼠标移动</li>
<li>keydown: 键盘按键按下</li>
<li>keyup: 键盘按键抬起</li>
<li>keypress: 键盘按键按下后触发</li>
<li>focus: 获得焦点触发</li>
<li>blur: 丢失焦点触发</li>
<li>cut: 剪切时触发</li>
<li>paste: 粘贴时触发</li>
<li>input: 输入时触发</li>
<li>change: 内容改变时触发</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/07/22/dom-in-action/" data-id="cl2oo8k7y003l22247lwm1ecm" data-title="DOM实战基础" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E6%88%98/" rel="tag">实战</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-project-common-configs" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/07/16/project-common-configs/" class="article-date">
  <time class="dt-published" datetime="2019-07-16T09:55:09.000Z" itemprop="datePublished">2019-07-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/07/16/project-common-configs/">项目开发中团队规范的那些事</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>项目开发中团队规范的那些事，记录一下项目中可以通过工具来约定和处理的规范</p>
<p>欢迎访问<a href="https://blog.bookcell.org/2019/07/16/project-common-configs/">个人博客-项目开发中团队规范的那些事</a></p>
<ul>
<li>editorconfig的使用</li>
<li>jsdoc的使用</li>
<li>.gitignore的使用</li>
<li>eslint的使用</li>
<li>prettier的使用</li>
</ul>
<h2 id="editorconfig的使用"><a href="#editorconfig的使用" class="headerlink" title="editorconfig的使用"></a>editorconfig的使用</h2><p>你是否有遇到过多人协作的项目中，大家的缩进风格不一样，有人用两个空格，有人用4个空格，也有人用tab缩进，而感到烦恼的。<a target="_blank" rel="noopener" href="https://editorconfig.org/">editorconfig</a>这个开源项目就是为此而生的。</p>
<p>官方的介绍如下：</p>
<blockquote>
<p>EditorConfig helps maintain consistent coding styles for multiple developers working on the same project across various editors and IDEs. The EditorConfig project consists of a file format for defining coding styles and a collection of text editor plugins that enable editors to read the file format and adhere to defined styles. EditorConfig files are easily readable and they work nicely with version control systems.</p>
</blockquote>
<p>使用思路：</p>
<p>通过一个配置文件，让不同的编辑器或者IDE自动识别缩进、字符编码格式等风格并保持统一。目前市面上绝大部分的编辑器和IDE都已经支持了，你使用的编辑器是否原生支持还是要安装插件，可以去官网上看一眼。</p>
<p><code>.edittorconfig</code>文件配置如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 表明是最顶层的配置文件，发现设为true时，才会停止查找.editorconfig文件，否则会往上一层目录继续查找</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># 对所有文件生效</span><br><span class="line">[*]</span><br><span class="line"># 编码格式，支持latin1、utf-8、utf-8-bom、utf-16be和utf-16le，通常使用utf-8</span><br><span class="line">charset = utf-8</span><br><span class="line"># 缩进类型, 支持space 空格, tab 制表符</span><br><span class="line">indent_style = space</span><br><span class="line"># 缩进长度，支持整数 - 缩进的长度, tab - 使用tab_width指定的值</span><br><span class="line">indent_size = 2</span><br><span class="line"># 换行符，支持 lf - (常用,*nux系统), crlf - windows, cr - &lt;=MacOS9</span><br><span class="line">end_of_line = lf</span><br><span class="line"># 保存文件时是否在文件最后插入一个空行, 支持 true - 是, false - 否</span><br><span class="line">insert_final_newline = true</span><br><span class="line"># 是否去除行尾的空格, 支持 true - 是, false - 否</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"></span><br><span class="line"># 对后缀名为 md 的文件生效</span><br><span class="line">[*.md]</span><br><span class="line">trim_trailing_whitespace = false</span><br></pre></td></tr></table></figure>

<h2 id="jsdoc的使用"><a href="#jsdoc的使用" class="headerlink" title="jsdoc的使用"></a>jsdoc的使用</h2><p>平时写js代码的时候，你是否只是随意写个<code>// xxxx</code>就完事了，对于不需要输出文档的代码也许还好，如果有输出文档的需求，那就头大了。不过团队中拥有一套一致的注释规范，并且在必要的时候还可以输出作为文档，不管是对于后续的新人以及维护都是有益的。</p>
<p>这里要使用的<a target="_blank" rel="noopener" href="https://jsdoc.app/">jsdoc</a>文档工具就是这样的一个存在，既有一套注释的规范，又可以支持输出为静态页面的文档。</p>
<p>使用思路:</p>
<p>在函数、类、模块等代码前使用<code>/** */</code>这样格式的注释，注释中支持描述、标签等内容，通过jsdoc提供的工具可以方便的将注释内容作为文档导出为html格式的文件。</p>
<h2 id="jsdoc注释规范"><a href="#jsdoc注释规范" class="headerlink" title="jsdoc注释规范"></a>jsdoc注释规范</h2><p>常用的注释格式如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents a book.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@constructor</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">title</span> - The title of the book.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">author</span> - The author of the book.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Book</span>(<span class="params">title, author</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Class representing a point. */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a point.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">x</span> - The x value.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">y</span> - The y value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get the x value.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125; The x value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">getX</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get the y value.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125; The y value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">getY</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Convert a string containing two comma-separated numbers into a point.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">str</span> - The string containing two comma-separated numbers.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="type">Point</span>&#125; A Point object.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">fromString</span>(<span class="params">str</span>) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注释中支持块级标签和行内标签，行内标签是指包含在块级标签内的标签内容，常用的块级标签如下:</p>
<ul>
<li>@author 该类&#x2F;方法的作者。</li>
<li>@class 表示这是一个类。</li>
<li>@function&#x2F;@method 表示这是一个函数&#x2F;方法(这是同义词)。</li>
<li>@private 表示该类&#x2F;方法是私有的，JSDOC 不会为其生成文档。</li>
<li>@name 该类&#x2F;方法的名字。</li>
<li>@description 该类&#x2F;方法的描述，可省略直接在开头写描述内容</li>
<li>@param 该类&#x2F;方法的参数，可重复定义。</li>
<li>@return 该类&#x2F;方法的返回类型。</li>
<li>@link 行内标签，创建超链接，生成文档时可以为其链接到其他部分。</li>
<li>@example 创建例子。</li>
</ul>
<h2 id="jsdoc文档输出"><a href="#jsdoc文档输出" class="headerlink" title="jsdoc文档输出"></a>jsdoc文档输出</h2><p>使用npm安装对应的jsdoc工具，可以全局安装或者局部安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i jsodc -g</span><br></pre></td></tr></table></figure>

<p>在项目根目录下创建一个配置文件<code>conf.json</code>:</p>
<p>默认的配置如下:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;recurseDepth&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;includePattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.+\\.js(doc|x)?$&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;excludePattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(^|\\/|\\\\)_&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;allowUnknownTags&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dictionaries&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;jsdoc&quot;</span><span class="punctuation">,</span><span class="string">&quot;closure&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;templates&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;cleverLinks&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;monospaceLinks&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>常用的配置如下:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;src/&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;src/libs&quot;</span> <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;opts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;template&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node_modules/docdash&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;encoding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;utf8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;destination&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./docs/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;recurse&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;verbose&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>source 表示传递给 JSDOC 的文件</li>
<li>source.include 表示 JSDOC 需要扫描哪些文件</li>
<li>source.exclude 表示 JSDOC 需要排除哪些文件</li>
<li>opts 表示传递给 JSDOC 的选项</li>
<li>opts.template 生成文档的模板，默认是 templates&#x2F;default</li>
<li>opts.encoding 读取文件的编码，默认是 utf8</li>
<li>opts.destination 生成文档的路径，默认是 .&#x2F;out&#x2F;</li>
<li>opts.recurse 运行时是否递归子目录</li>
<li>opts.verbose 运行时是否输出详细信息，默认是 false</li>
</ul>
<p>然后在命令行中执行 <code>jsdoc -c /path/to/conf.json</code> 即可在根目录下生成一个包含html的文档目录。</p>
<h2 id="gitignore的使用"><a href="#gitignore的使用" class="headerlink" title=".gitignore的使用"></a>.gitignore的使用</h2><p>在使用Git作为项目的版本管理已经很普遍了，使用的过程中是否有遇到某些配置、编译的临时文件或者依赖目录等不需要进行版本的内容，可以通过<code>.gitignore</code>进行忽略，将对应的目录或文件写入配置文件后，git就不会将对应的内容纳入版本管理。</p>
<p>需要注意的是，已经被纳入版本管理的内容，不受这个配置的影响。</p>
<p>使用思路:</p>
<p>在项目根目录下创建一个<code>.gitignore</code>文件，并将要忽略纳入版本管理的内容写入即可，每一行内容支持模式匹配。</p>
<p>create-react-app中使用的配置文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.idea/</span><br><span class="line">.vscode/</span><br><span class="line">node_modules/</span><br><span class="line">build</span><br><span class="line">.DS_Store</span><br><span class="line">*.tgz</span><br><span class="line">my-app*</span><br><span class="line">template/src/__tests__/__snapshots__/</span><br><span class="line">lerna-debug.log</span><br><span class="line">npm-debug.log*</span><br><span class="line">yarn-debug.log*</span><br><span class="line">yarn-error.log*</span><br><span class="line">/.changelog</span><br><span class="line">.npm/</span><br></pre></td></tr></table></figure>

<p>vue-cli中使用的配置文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">.DS_Store</span><br><span class="line">design</span><br><span class="line">*.log</span><br><span class="line">packages/test</span><br><span class="line">dist</span><br><span class="line">temp</span><br><span class="line">.vuerc</span><br><span class="line">.version</span><br><span class="line">.versions</span><br><span class="line">.changelog</span><br></pre></td></tr></table></figure>

<h2 id="eslint的使用"><a href="#eslint的使用" class="headerlink" title="eslint的使用"></a>eslint的使用</h2><p>每个团队会维护一套自己的代码规范，也有使用社区里最佳实践的代码规范，如何做到可以让工具自动帮你检测团队中的代码是否符合代码规范，lint工具就可以帮你做到，社区里有jslint,eslint等工具，这里主要介绍近期使用比较多的ESLint。</p>
<p><a target="_blank" rel="noopener" href="https://eslint.org/">ESLint</a>是一个静态代码检测工具，是对JavaScript和JSX可插拔的检测工具，由Nicholas C. Zakas开发。</p>
<p>使用思路:</p>
<p>创建一个配置文件，通过编辑器插件或者eslint工具对代码进行静态检测并提示错误。</p>
<h3 id="安装eslint"><a href="#安装eslint" class="headerlink" title="安装eslint"></a>安装eslint</h3><p>可以全局安装或者项目中安装使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint -g</span><br></pre></td></tr></table></figure>

<p>然后生成配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint --init</span><br></pre></td></tr></table></figure>
<p>会在相应目录下生成一个eslint默认配置文件</p>
<p>最后，运行lint</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint /path/to/file.js</span><br></pre></td></tr></table></figure>

<p>通常可以<code>package.json</code>的脚本中进行配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:create&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint --init&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>日常可以通过<code>npm run lint</code>来进行使用。</p>
<p>另外，也可以通过git的hook在代码提交前自动运行lint，这里不做说明，具体配置可以搜索相应文章。</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>常用配置文件如下:</p>
<p>配置文件支持js, json, yaml格式，这里以<code>.eslintrc.js</code>为例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// .eslintrc.js </span><br><span class="line">module.exports = &#123;</span><br><span class="line">  &quot;extends&quot;: &quot;eslint:recommended&quot;,</span><br><span class="line">  &quot;env&quot;: &#123;</span><br><span class="line">    &quot;browser&quot;: true,</span><br><span class="line">    &quot;commonjs&quot;: true,</span><br><span class="line">    &quot;node&quot;: true,</span><br><span class="line">    &quot;es6&quot;: true</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;parserOptions&quot;: &#123;</span><br><span class="line">    &quot;ecmaVersion&quot;: 2018</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &quot;no-console&quot;: &quot;off&quot;,</span><br><span class="line">    &quot;strict&quot;: [&quot;error&quot;, &quot;global&quot;],</span><br><span class="line">    &quot;curly&quot;: &quot;warn&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>具体的配置说明，<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ad1e46faaea2">这篇文章</a>讲得很清楚，有兴趣可以查看，这里主要是extends的使用，可以使用官方推荐的规则配置，也可以使用第三方的比如airbnb等，或者团队自己积累的代码规范。</p>
<h2 id="prettier的使用"><a href="#prettier的使用" class="headerlink" title="prettier的使用"></a>prettier的使用</h2><p>Prettier是一款对代码格式进行美化的工具，让你在代码评审时减少对代码格式排版上的时间浪费。</p>
<p>官方的示例了解一下:</p>
<p>原始代码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(reallyLongArg(), omgSoManyParameters(), IShouldRefactorThis(), isThereSeriouslyAnotherOne());</span><br></pre></td></tr></table></figure>

<p>经过Prettier格式化后:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">foo(</span><br><span class="line">  reallyLongArg(),</span><br><span class="line">  omgSoManyParameters(),</span><br><span class="line">  IShouldRefactorThis(),</span><br><span class="line">  isThereSeriouslyAnotherOne()</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>使用思路:</p>
<p>通过编辑器插件或者git hook来实现对代码的自动格式化，从而让代码排版变得整齐。</p>
<h2 id="安装及使用"><a href="#安装及使用" class="headerlink" title="安装及使用"></a>安装及使用</h2><p>将prettier添加到项目中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install prettier --save-dev --save-exact</span><br></pre></td></tr></table></figure>

<p>直接使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx prettier --write src/index.js</span><br></pre></td></tr></table></figure>

<p>增加git hook</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pretty-quick husky --save-dev</span><br></pre></td></tr></table></figure>

<p>在<code>package.json</code>文件中增加以下配置:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;husky&quot;: &#123; &quot;hooks&quot;: &#123; &quot;pre-commit&quot;: &quot;pretty-quick --staged&quot; &#125; &#125; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h2><p>在项目根目录下创建一个<code>.prettierrc</code>配置文件即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;trailingComma&quot;: &quot;es5&quot;,</span><br><span class="line">  &quot;singleQuote&quot;: true,</span><br><span class="line">  &quot;semi&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果要配合编辑器进行使用，可以查找对应编辑的插件并进行配置。</p>
<p>需要说明的是prettier和editorconfig其实有重复的，两者可以选一个使用。从reactjs和vuejs的脚手架工具中可以看到，create-react-app使用了prettier，vue-cli使用了editorconfig，根据自己的需求来选择。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://editorconfig.org/">editorconfig官网</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/iuap-design/blog/issues/189">使用editorconfig配置你的编辑器</a></li>
<li><a target="_blank" rel="noopener" href="http://www.alloyteam.com/2014/12/editor-config/">(译)EditorConfig介绍</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/712cea0ef70e">EditorConfig介绍</a></li>
<li><a target="_blank" rel="noopener" href="https://jsdoc.app/">jsdoc官网</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jsdoc/jsdoc">jsdoc github仓库</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d7819c519a47">jsdoc的使用</a></li>
<li><a target="_blank" rel="noopener" href="https://scarletsky.github.io/2017/12/23/write-javascript-document-by-jsdoc/">用 JSDOC 编写 JavaScript 文档</a></li>
<li><a target="_blank" rel="noopener" href="https://git-scm.com/docs/gitignore">gitignore文档</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/facebook/create-react-app/blob/master/.gitignore">create-react-app的gitignore配置</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/github/gitignore">A collection of useful .gitignore templates</a></li>
<li><a target="_blank" rel="noopener" href="https://eslint.org/">ESLint官网</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/eslint/eslint">ESLint github仓库</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ad1e46faaea2">Eslint 超简单入门教程</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009077086">使用 VSCode + ESLint 实践前端编码规范</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000011470316">eslint 常用配置</a></li>
<li><a target="_blank" rel="noopener" href="https://prettier.io/">prettier官网</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/prettier/prettier">prettier github仓库</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5a791d566fb9a0634853400e">vscode + prettier 专治代码洁癖</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-cli">vue-cli github仓库</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/facebook/create-react-app">create-react-app github仓库</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/07/16/project-common-configs/" data-id="cl2oo8k9h007322242okcdh95" data-title="项目开发中团队规范的那些事" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/editorconfig/" rel="tag">editorconfig</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eslint/" rel="tag">eslint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gitignore/" rel="tag">gitignore</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jsdoc/" rel="tag">jsdoc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/prettier/" rel="tag">prettier</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%A2%E9%98%9F/" rel="tag">团队</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%A7%84%E8%8C%83/" rel="tag">规范</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-three-columns-layout-solutions" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/07/14/three-columns-layout-solutions/" class="article-date">
  <time class="dt-published" datetime="2019-07-14T10:06:52.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/07/14/three-columns-layout-solutions/">CSS三栏布局方案</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>平时开发或者面试的时候，经常会遇到这样的场景，实现一个三栏布局，具体要求如下：</p>
<blockquote>
<p>高度为100px，左右栏宽度固定为300px，中间栏宽度自适应。</p>
</blockquote>
<p>有多种布局方案可以实现，这里一一探索。</p>
<h2 id="浮动布局方案"><a href="#浮动布局方案" class="headerlink" title="浮动布局方案"></a>浮动布局方案</h2><p>实现思路：</p>
<p>通过让左右两栏固定宽度和浮动，并设置中间栏的左右外边距实现三栏自适应</p>
<p>这里还有一种实现思路，中间栏创建一个BFC同样可以实现自适应，原理是浮动不会影响BFC内的内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-浮动布局方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span>, <span class="selector-class">.right</span>, <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-right</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点：</p>
<ol>
<li>内容展现顺序与DOM结构不一致，主体内容后加载，一定程度影响用户体验</li>
<li>当宽度缩小到不足以显示三栏时，右侧栏会被挤到下方</li>
</ol>
<p>兼容性：</p>
<ol>
<li>PC端支持IE6+, Firefox 2+, Chrome 1+</li>
<li>移动端支持iOS Safari 1.0，Android browser 1.0</li>
</ol>
<h2 id="绝对定位布局方案"><a href="#绝对定位布局方案" class="headerlink" title="绝对定位布局方案"></a>绝对定位布局方案</h2><p>实现思路:</p>
<p>容器设置为相对定位，左右两栏分别用绝对定位，中间栏增加左右外边距实现自适应</p>
<p>还有一种思路， 左右两栏分别绝对定位在两侧，中间栏同样使用绝对定位，并设置左右的距离为300px</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-绝对定位方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-right</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点：</p>
<ol>
<li>父元素必须要定位（使用非static的定位方式）</li>
<li>宽度缩小到无法显示主体内容时，主体内容会被覆盖无法显示</li>
</ol>
<p>优点：</p>
<ol>
<li>内容可以优先加载</li>
</ol>
<p>兼容性：</p>
<ol>
<li>PC端支持IE6+, Firefox 2+, Chrome 1+</li>
<li>移动端未知</li>
</ol>
<h2 id="Flex布局方案"><a href="#Flex布局方案" class="headerlink" title="Flex布局方案"></a>Flex布局方案</h2><p>实现思路：</p>
<p>设置容器为flex，然后左右栏设置固定宽度不可伸缩，中间栏设置为自动伸缩</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-弹性盒布局方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span>, <span class="selector-class">.main</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点：</p>
<ol>
<li>无法兼容低版本的浏览器</li>
</ol>
<p>优点：</p>
<ol>
<li>代码简洁，DOM结构清晰</li>
<li>主流的实现方式</li>
</ol>
<p>兼容性：</p>
<ol>
<li>PC端支持IE10及以上、Edge 12,chrome 21,firefox 28,safari 6.1（IE10为部分支持，其他浏览器版本为完全支持）</li>
<li>移动端支持iOS Safari 7, android browser 4.4</li>
<li><a target="_blank" rel="noopener" href="https://caniuse.com/#search=flex">兼容性详情</a></li>
</ol>
<h2 id="网格布局方案"><a href="#网格布局方案" class="headerlink" title="网格布局方案"></a>网格布局方案</h2><p>实现思路：</p>
<p>设置容器为grid，然后设置行高度为100px，设置三栏的宽度</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-网格布局方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">grid-template-rows</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">grid-template-columns</span>: <span class="number">300px</span> <span class="number">1</span>fr <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点：</p>
<ol>
<li>兼容性相对弹性盒要差，不过目前绝大部分浏览器较新的版本已经支持</li>
</ol>
<p>优点:</p>
<ol>
<li>代码简洁，DOM结构清晰</li>
</ol>
<p>兼容性:</p>
<ol>
<li>PC端支持IE10及以上、Edge 16,chrome 57,firefox 52,safari 10.1（IE10为部分支持，其他浏览器为完全支持的起始版本）</li>
<li>移动端支持iOS Safari 10.3, android browser 67</li>
<li><a target="_blank" rel="noopener" href="https://caniuse.com/#search=grid">兼容性详情</a></li>
</ol>
<h2 id="表格布局方案"><a href="#表格布局方案" class="headerlink" title="表格布局方案"></a>表格布局方案</h2><p>实现思路:</p>
<p>设置容器为table且宽度为100%，并设置子元素为table-cell</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-表格布局方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span>, <span class="selector-class">.main</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: table-cell;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点:</p>
<ol>
<li>非语义化</li>
</ol>
<p>优点:</p>
<ol>
<li>兼容浏览器版低</li>
</ol>
<p>兼容性:</p>
<ol>
<li>PC支持IE8+, Firefox 3+, Chrome 4+, Safari 3.1+</li>
<li>移动端支持 iOS Safari 3.2, android browser 2.1</li>
<li><a target="_blank" rel="noopener" href="https://caniuse.com/#search=table">兼容性详情</a></li>
</ol>
<h2 id="圣杯布局"><a href="#圣杯布局" class="headerlink" title="圣杯布局"></a>圣杯布局</h2><p>实现思路:</p>
<p>通过将左右两栏挂在容器的两侧，从而实现三栏布局，形状类似圣杯</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-圣杯布局方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-right</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">left</span>: -<span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: -<span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点:</p>
<ol>
<li>当中间栏宽度比左栏宽度小时，布局会发生混乱</li>
</ol>
<p>优点:</p>
<ol>
<li>支持内容优先加载</li>
</ol>
<p>兼容性:</p>
<ol>
<li>参考浮动布局方案</li>
</ol>
<h2 id="双飞翼布局方案"><a href="#双飞翼布局方案" class="headerlink" title="双飞翼布局方案"></a>双飞翼布局方案</h2><p>实现思路:</p>
<p>基于圣杯布局，引入一个容器来放置中间栏，并且设置中间栏的外边距，不需要使用相对定位</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>三栏布局-双飞翼布局方案<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> <span class="selector-class">.in</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.main</span> <span class="selector-class">.in</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-right</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: -<span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;in&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点:</p>
<ol>
<li>DOM结构较复杂</li>
</ol>
<p>优点:</p>
<ol>
<li>支持内容优先加载</li>
<li>相对圣杯布局，宽度缩小，布局不会发生混乱</li>
</ol>
<p>兼容性:</p>
<ol>
<li>参考浮动布局方案</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/huyaocode/webKnowledge/tree/master/CSS/%E5%B8%83%E5%B1%80">CSS布局知识</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013275439">搞定css三栏布局（六种方法）</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25070186">详解 CSS 七种三栏布局技巧</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/zwwill/blog/issues/11">聊聊为什么淘宝要提出「双飞翼」布局</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/07/14/three-columns-layout-solutions/" data-id="cl2oo8kaf008p22243d4jcysj" data-title="CSS三栏布局方案" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/absolute/" rel="tag">absolute</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flexbox/" rel="tag">flexbox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/float/" rel="tag">float</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grid/" rel="tag">grid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%89%E6%A0%8F/" rel="tag">三栏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8F%8C%E9%A3%9E%E7%BF%BC/" rel="tag">双飞翼</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9C%A3%E6%9D%AF/" rel="tag">圣杯</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B8%83%E5%B1%80/" rel="tag">布局</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%B9%E6%80%A7%E7%9B%92/" rel="tag">弹性盒</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B5%AE%E5%8A%A8/" rel="tag">浮动</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D/" rel="tag">绝对定位</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E6%A0%BC/" rel="tag">网格</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-understanding-new-operator-in-js" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/07/13/understanding-new-operator-in-js/" class="article-date">
  <time class="dt-published" datetime="2019-07-13T04:22:40.000Z" itemprop="datePublished">2019-07-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/07/13/understanding-new-operator-in-js/">(深入JavaScript系列)new背后的原理及实现</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>面试中遇到关于JavaScript中new关键字背后的实现原理，了解大概的原理，但是表达出来不是很清楚，表示掌握得不够完全，这里查了一些资料，做一下整理。</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>例如我们做了new的调用操作，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ConstructorFunction</span>(arg1, arg2);</span><br></pre></td></tr></table></figure>

<h3 id="new操作"><a href="#new操作" class="headerlink" title="new操作"></a>new操作</h3><p>背后实际上发生了这些步骤:</p>
<ol>
<li>创建一个新的空对象，对象类型为简单的object</li>
<li>设置这个空对象的实例原型(内部的、不可访问的[[prototype]]属性，部分浏览器可通过<code>__proto__</code>进行访问，ES5开始可通过<code>Object.getPrototypeOf(obj)</code>取得)为构造函数的<code>prototype</code>属性（每个函数对象都拥有一个<code>prototype</code>属性）</li>
<li>让<code>this</code>变量指向这个新创建的对象</li>
<li>以这个新创建的对象为上下文执行构造函数</li>
<li>如果构造函数有返回非空的对象，则返回该对象，否则返回第一步中创建的对象。</li>
</ol>
<h3 id="原型的几个概念"><a href="#原型的几个概念" class="headerlink" title="原型的几个概念"></a>原型的几个概念</h3><p>这里涉及到几个概念：</p>
<ol>
<li>构造函数，配合使用new关键字的函数可称为构造函数</li>
<li>实例原型对象，在Ecma标准中，通过<code>[[prototype]]</code>表示，在部分浏览器中使用<code>__proto__</code>(非标准的，不建议使用)来表示，ES5开始可使用<code>Object.getPrototypeOf()</code>读取，ES6开始可使用<code>Object.setPrototypeOf()</code>方法进行设置(仅支持完全替换对象或者设为null)</li>
<li>原型对象，构造函数的<code>prototype</code>属性</li>
</ol>
<p>比较难理解的是<code>[[prototype]]</code>这个属性，每个对象都拥有一个内部的<code>[[prototype]]</code>属性。这个对象是创建对象的时候设置的，创建包括<code>new</code>、通过<code>Object.create()</code>或者用文本字面量，并且只能通过<code>Object.getPrototypeOf()</code>和<code>Object.setPrototypeOf()</code>方法进行操作。</p>
<h3 id="原型链和继承"><a href="#原型链和继承" class="headerlink" title="原型链和继承"></a>原型链和继承</h3><p><strong>说明</strong></p>
<p>一旦通过new操作实例化一个对象后，如果这个实例上查找某个属性并不存在，脚本会通过<code>[[prototype]]</code>对象向上一级继续查找，也就是通过原型链的方式进行往上查找。这种方式和在传统的类继承方式是类似的，在JavaScript中通过原型链的形式来继承父类的属性和方法。</p>
<p>函数中，除了拥有隐藏的<code>[[prototype]]</code>属性，还有一个<code>prototype</code>属性，这个属性可以访问、修改和添加希望给实例继承的属性和方法。</p>
<p><strong>原型链实例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ObjMaker</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="variable language_">this</span>.<span class="property">a</span> = <span class="string">&#x27;first&#x27;</span>; &#125;</span><br><span class="line"><span class="comment">// ObjMaker是一个普通函数，并且可以作为一个构造函数使用</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">ObjMaker</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">b</span> = <span class="string">&#x27;second&#x27;</span>;</span><br><span class="line"><span class="comment">// 像其他函数一样，ObjMaker拥有一个可访问的属性prototype可以被修改，这里增加了一个属性b。</span></span><br><span class="line"><span class="comment">// objMaker还有一个内部的属性[[prototype]]，可以通过上述的两个方法进行访问和修改，</span></span><br><span class="line"><span class="comment">// 修改的话仅直接替换为其他对象或者设置为null</span></span><br><span class="line"></span><br><span class="line">obj1 = <span class="keyword">new</span> <span class="title class_">ObjMaker</span>();</span><br><span class="line"><span class="comment">// 这里会发生前面所说的几件事情</span></span><br><span class="line"><span class="comment">// 首先创建一个空的对象obj1</span></span><br><span class="line"><span class="comment">// 然后将obj1的内部实例对象[[prototype]]设置为ObjMaker的prototype值，</span></span><br><span class="line"><span class="comment">// 并且设置this上下文为obj1，执行构造函数。因此obj1.a可以拿到first值</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">a</span>);</span><br><span class="line"><span class="comment">// 输出first</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">b</span>);</span><br><span class="line"><span class="comment">// 输出second，解释: obj1并没有属性b，因此会去obj1的内部实例对象属性[[prototype]]上查找，也就是ObjMaker的prototype对象，找到b之后返回对应的值</span></span><br></pre></td></tr></table></figure>

<p><strong>继承实例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SubObjMaker</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="title class_">SubObjMaker</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">ObjMaker</span>(); <span class="comment">// 这种继承模式已经废弃</span></span><br><span class="line"><span class="comment">// 因为使用了new，SubObjMaker.prototype的内部实例对象属性[[prototype]]</span></span><br><span class="line"><span class="comment">// 会被设置为ObjMaker.prototype属性。</span></span><br><span class="line"><span class="comment">// 现在通常会使用ES5中的Object.create()方法来实现。</span></span><br><span class="line"><span class="comment">// SubObjMaker.prototype = Object.create(ObjMaker.prototype);</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">SubObjMaker</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">c</span> = <span class="string">&#x27;third&#x27;</span>;</span><br><span class="line">obj2 = <span class="keyword">new</span> <span class="title class_">SubObjectMaker</span>();</span><br><span class="line"><span class="comment">// obj2的实例原型对象[[prototype]]被设置为SubObjectMaker.prototype属性，</span></span><br><span class="line"><span class="comment">// SubObjectMaker.prototype的[[prototype]]属性为ObjMaker.prototype</span></span><br><span class="line"><span class="comment">// 形成了一条如下的原型链</span></span><br><span class="line"><span class="comment">// ojb2 -&gt; SubObjMaker.prototype -&gt; ObjMaker.prototype</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="property">c</span>);</span><br><span class="line"><span class="comment">// 输出third，通过原型链查找，在SubObjMaker.prototype上找到</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="property">b</span>);</span><br><span class="line"><span class="comment">// 输出second, 通过原型链查找，在ObjMaker.prototype上找到</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="property">a</span>);</span><br><span class="line"><span class="comment">// 输出first, 通过原型链查找，在SubObjMaker.prototype上找到，</span></span><br><span class="line"><span class="comment">// 因为SubObjMaker.prototype是由ObjMaker构造生成的，因此脚本会自动赋值</span></span><br></pre></td></tr></table></figure>

<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">newOperator</span>(<span class="params">ConStr, args</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> thisValue = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">ConStr</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">    <span class="comment">// 构建一个空对象并实现继承</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> result = <span class="title class_">ConStr</span>.<span class="title function_">apply</span>(thisValue, args);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> result === <span class="string">&#x27;object&#x27;</span> &amp;&amp; result != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 构造函数可能会返回对象，这里要增加判断，并且要排除null，因为null的类型检测为object</span></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> thisValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>欢迎访问我的<a href="https://blog.bookcell.org/">博客</a> <a href="https://blog.bookcell.org/">https://blog.bookcell.org</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript">What is the new keyword in javascript</a></li>
<li><a target="_blank" rel="noopener" href="https://zeekat.nl/articles/constructors-considered-mildly-confusing.html">Contructors Considered Mildly Confusing</a></li>
<li><a target="_blank" rel="noopener" href="https://2ality.com/2014/01/new-operator.html">The new operator implemented in JavaScript</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/07/13/understanding-new-operator-in-js/" data-id="cl2oo8kag008s22247xy6hkom" data-title="(深入JavaScript系列)new背后的原理及实现" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/new/" rel="tag">new</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" rel="tag">关键字</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B/" rel="tag">原型</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/" rel="tag">原型链</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E7%90%86/" rel="tag">原理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%A7%E6%89%BF/" rel="tag">继承</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-understanding-the-virtual-dom" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/07/09/understanding-the-virtual-dom/" class="article-date">
  <time class="dt-published" datetime="2019-07-09T08:30:48.000Z" itemprop="datePublished">2019-07-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/07/09/understanding-the-virtual-dom/">理解虚拟DOM</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>文章来源: <a target="_blank" rel="noopener" href="https://bitsofco.de/understanding-the-virtual-dom/">https://bitsofco.de/understanding-the-virtual-dom/</a></li>
<li>文章概要: 讲解虚拟DOM的概念及在React中的应用</li>
</ul>
<p><strong>正文</strong>：</p>
<p>我最近写了关于<a target="_blank" rel="noopener" href="https://bitsofco.de/what-exactly-is-the-dom/">DOM</a>和<a target="_blank" rel="noopener" href="https://bitsofco.de/what-is-the-shadow-dom/">shadow DOM</a>具体是什么，以及他们的差异。回顾一下，文档对象模型是一个HTML文档基于对象的表示，和操作对象的一个接口。影子DOM(shadow DOM)可以想做是”精简版”的DOM。它也是HTML元素基于对象的表示，但不是完整独立的文档。相反的，影子DOM允许我们分离我们的DOM成为更小的、具备封装性的单元并在HTML文档中使用。</p>
<p>另一个相似的术语你可能遇见过的是“虚拟DOM”(virtual DOM)。尽管这个概念已经出现了许多年，让它变得流行起来的还是在React框架中的使用。在这篇文章中，我会涉及虚拟DOM具体是什么，和原始的DOM有什么差别，以及如何使用。</p>
<h2 id="为什么我们需要虚拟DOM？"><a href="#为什么我们需要虚拟DOM？" class="headerlink" title="为什么我们需要虚拟DOM？"></a>为什么我们需要虚拟DOM？</h2><p>为了理解为什么会出现虚拟DOM，先回顾一下原始DOM。就如前面提到的，DOM中有两部分内容，基于对象的HTML文档标识和操作对象的API。</p>
<p>例如，让我们看一个无序列表和列表项的简单HTML文档</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;list__item&quot;</span>&gt;</span>List item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>文档会像下面的DOM树进行表示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  |</span><br><span class="line">  |-- head lang=&quot;en&quot;</span><br><span class="line">  |-- body</span><br><span class="line">        |-- ul class=&quot;list&quot;</span><br><span class="line">            |--li class=&quot;list__item&quot;</span><br><span class="line">               |--&quot;List item&quot;</span><br></pre></td></tr></table></figure>

<p>设想一下我们想要修改第一个列表项的内容为“List item one”，并且添加第二个列表项。为了做到这一点，我们需要使用DOM API查找到想要更新的元素，创建新的元素，添加属性和内容，最终更新DOM元素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const listItemOne = document.getElementsByClassName(&quot;list__item&quot;)[0];</span><br><span class="line">listItemOne.textContent = &quot;List item one&quot;;</span><br><span class="line"></span><br><span class="line">const list = document.getElementsByClassName(&quot;list&quot;)[0];</span><br><span class="line">const listItemTwo = document.createElement(&quot;li&quot;);</span><br><span class="line">listItemTwo.classList.add(&quot;list__item&quot;);</span><br><span class="line">listItemTwo.textContent = &quot;List item two&quot;;</span><br><span class="line">list.appendChild(listItemTwo);</span><br></pre></td></tr></table></figure>

<h3 id="DOM无法解决的问题"><a href="#DOM无法解决的问题" class="headerlink" title="DOM无法解决的问题"></a>DOM无法解决的问题</h3><p>当1998年DOM的第一版规范发布时，我们构建和管理网页与现在有很大的不同。那时并没有像现在这样依赖于DOM API来创建和更新页面内容。</p>
<p>如<code>document.getElementsByClassName()</code>这样的简单方法小范围使用是好的，但是如果我们每几秒去更新页面中的多个元素时，这会让查询和更新DOM变得耗性能。</p>
<p>更进一步，由于API的组织方式，通常执行一些更耗性能的操作，例如更新文档的一大块内容比查找然后更新具体的元素要来得简单。回到我们的例子，某种程度上替换整个无序列表成新的比修改具体的元素要容易。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;list&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">list.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;li class=&quot;list__item&quot;&gt;List item one&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;list__item&quot;&gt;List item two&lt;/li&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，两个方法之间的性能差异可能并不明显。但是，随着页面大小的增加，仅选择和修改必须的内容变得尤其重要。</p>
<h3 id="虚拟DOM的解决方式"><a href="#虚拟DOM的解决方式" class="headerlink" title="虚拟DOM的解决方式"></a>虚拟DOM的解决方式</h3><p>虚拟DOM的提出就是为了高效解决这些频繁更新DOM的难题。不像DOM或者影子DOM，虚拟DOM并不是官方的规范，而是和DOM交互的新方法。</p>
<p>一个虚拟DOM可以设想为原始DOM的一份拷贝。这份拷贝可以不使用DOM的API而进行频繁的操作和更新。一旦所有的更新都被应用到虚拟DOM后，我们可以找到要应用到原始DOM上的具体变化差异并通过高效和有针对性的进行更新。</p>
<h2 id="虚拟DOM看起来像什么？"><a href="#虚拟DOM看起来像什么？" class="headerlink" title="虚拟DOM看起来像什么？"></a>虚拟DOM看起来像什么？</h2><p>虚拟DOM的名字让这个概念给人有点神秘的感觉。实际上，虚拟DOM就是一个常规的JavaScript对象。</p>
<p>让我们回顾一下之前创建的DOM树：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  |</span><br><span class="line">  |-- head lang=&quot;en&quot;</span><br><span class="line">  |-- body</span><br><span class="line">        |-- ul class=&quot;list&quot;</span><br><span class="line">            |--li class=&quot;list__item&quot;</span><br><span class="line">               |--&quot;List item&quot;</span><br></pre></td></tr></table></figure>

<p>这颗树可以通过JavaScript对象来表示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vdom = &#123;</span><br><span class="line">    <span class="attr">tagName</span>: <span class="string">&quot;html&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;head&quot;</span> &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">tagName</span>: <span class="string">&quot;body&quot;</span>,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">tagName</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">                    <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list&quot;</span> &#125;,</span><br><span class="line">                    <span class="attr">children</span>: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>,</span><br><span class="line">                            <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list__item&quot;</span> &#125;,</span><br><span class="line">                            <span class="attr">textContent</span>: <span class="string">&quot;List item&quot;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以设想这个对象作为我们的虚拟DOM。就像原始DOM，这也是基于对象的HTML文档表示。但是因为这是一个纯粹的JavaScript对象，我们可以自由和频繁的操作而不用接触实际的DOM，直到需要的时候。</p>
<p>通常使用多个小块的虚拟DOM，而不是使用一个虚拟DOM来表示整个对象。例如，我们在使用一个<code>list</code>组件，对应我们的无序列表元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = &#123;</span><br><span class="line">    <span class="attr">tagName</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">    <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list&quot;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>,</span><br><span class="line">            <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list__item&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">textContent</span>: <span class="string">&quot;List item&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="虚拟DOM的工作原理"><a href="#虚拟DOM的工作原理" class="headerlink" title="虚拟DOM的工作原理"></a>虚拟DOM的工作原理</h2><p>现在我们看到了虚拟DOM的结构，接下来看一下它是如何在DOM中解决性能和使用问题的。</p>
<p>就如我提到的，我们可以使用虚拟DOM找到需要应用到DOM中的具体变更内容，然后单独更新这些变更。让我们回到无序列表的例子并做一些之前使用DOM API操作的变更。</p>
<p>首先我们要创建一份虚拟DOM的拷贝，包含我们想要的修改。因为我们不需要使用DOM API，我们可以只创建一个新的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copy = &#123;</span><br><span class="line">    <span class="attr">tagName</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">    <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list&quot;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>,</span><br><span class="line">            <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list__item&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">textContent</span>: <span class="string">&quot;List item one&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>,</span><br><span class="line">            <span class="attr">attributes</span>: &#123; <span class="string">&quot;class&quot;</span>: <span class="string">&quot;list__item&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">textContent</span>: <span class="string">&quot;List item two&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这份拷贝是用于创建一个和原始虚拟DOM的变更内容(“diff”)，在这里是列表和更新的列表。变更内容如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> diffs = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">newNode</span>: &#123; <span class="comment">/* 新版的列表1 */</span> &#125;,</span><br><span class="line">        <span class="attr">oldNode</span>: &#123; <span class="comment">/* 原始版本的列表1 */</span> &#125;,</span><br><span class="line">        <span class="attr">index</span>: <span class="comment">/* 在父元素的子节点列表中元素索引 */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">newNode</span>: &#123; <span class="comment">/* 列表2 */</span> &#125;,</span><br><span class="line">        <span class="attr">index</span>: &#123; <span class="comment">/* */</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>变更内容提供了如何更新实际DOM的指南。一旦所有的变更内容都收集到了，我们就可以批量更新DOM，而且是仅更新必需的内容。</p>
<p>例如，我们可以遍历每一个的变更内容，然后添加一个新元素或者基于变更内容更新旧的内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> domElement = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;list&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">diffs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">diff</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(diff.<span class="property">newNode</span>.<span class="property">tagName</span>);</span><br><span class="line">    <span class="comment">/* 添加属性 */</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (diff.<span class="property">oldNode</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果有旧的版本，用新的版本替换</span></span><br><span class="line">        domElement.<span class="title function_">replaceChild</span>(newElement, diff.<span class="property">index</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 如果没有旧的版本，创建一个新的节点</span></span><br><span class="line">        domElement.<span class="title function_">appendChild</span>(newElement);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意这里只是简单讲述虚拟DOM是如何工作的，有很多案例并没有涉及到。</p>
<h2 id="虚拟DOM和框架"><a href="#虚拟DOM和框架" class="headerlink" title="虚拟DOM和框架"></a>虚拟DOM和框架</h2><p>通常虚拟DOM会和框架一同使用，而不是像上面这样直接操作。</p>
<p>像React和Vue这样的框架使用虚拟DOM来执行高效的DOM更新。例如，我们的<code>list</code>组件通过React可以这样写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;ul&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;list&quot;</span> &#125;,</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;list__item&quot;</span> &#125;, <span class="string">&quot;List item&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>如果我们更新我们的列表，我们可以只是重写整个列表模板，然后再次调用<code>ReactDOM.render()</code>方法，传递一个新的列表。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newList = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;ul&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;list&quot;</span> &#125;,</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;list__item&quot;</span> &#125;, <span class="string">&quot;List item one&quot;</span>),</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>, &#123; <span class="attr">className</span>: <span class="string">&quot;list__item&quot;</span> &#125;, <span class="string">&quot;List item two&quot;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(newList, <span class="variable language_">document</span>.<span class="property">body</span>), <span class="number">5000</span>));</span><br></pre></td></tr></table></figure>

<p>因为React使用了虚拟DOM，即使我们重新渲染了整个模板，只有实际的变化会被更新。如果通过开发者工具进行查看，可以查看具体的元素和具体元素的部分有变化。</p>
<h2 id="DOM和虚拟DOM"><a href="#DOM和虚拟DOM" class="headerlink" title="DOM和虚拟DOM"></a>DOM和虚拟DOM</h2><p>总结一下，虚拟DOM是一个可以让我们和DOM元素进行简单高效的交互工具。它是DOM的JavaScript对象表示，我们可以根据我们的需要频繁的修改。对于这个对象的修改会被整理后，有针对性的对实际DOM进行更新。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/07/09/understanding-the-virtual-dom/" data-id="cl2oo8kah008v222416q27rtv" data-title="理解虚拟DOM" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Virtual-DOM/" rel="tag">Virtual DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%99%9A%E6%8B%9FDOM/" rel="tag">虚拟DOM</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web-component-in-a-nutshell" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/06/16/web-component-in-a-nutshell/" class="article-date">
  <time class="dt-published" datetime="2019-06-16T14:27:50.000Z" itemprop="datePublished">2019-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/06/16/web-component-in-a-nutshell/">Web Component入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>原文出自: <a target="_blank" rel="noopener" href="https://levelup.gitconnected.com/web-components-in-a-nutshell-1e114aa971b9">https://levelup.gitconnected.com/web-components-in-a-nutshell-1e114aa971b9</a></li>
<li>原标题: Web Components in a Nutshell</li>
<li>原副标题: 原生浏览器Web Component基础和如何创建</li>
<li>翻译文章同步发表在团队的语雀上</li>
</ul>
<p>说明: 以下使用Web组件来表示Web Component</p>
<p>正文:</p>
<p>在web开发中，代码复用已成为一个聚焦重点。作为一名开发者，我们可能会遇到这样的场景，在多个地方使用一个代码片段来表示自定义的UI。如果我们不是很小心的写出，这可能会让整个代码结构变得不可管理。Web组件提供了一个原生的API来构建可复用的UI块。</p>
<h2 id="什么是Web组件"><a href="#什么是Web组件" class="headerlink" title="什么是Web组件?"></a>什么是Web组件?</h2><p>Web组件是一系列用来帮助我们创建可复用、具备封装的自定义HTML UI元素的浏览器底层的API。Web组件被认为更加好，是因为他们可以用任意的库或者框架创建，而且你可以立马使用原生JavaScript开始创建你自己的Web组件。</p>
<p>使用Web组件的一大优势在于他们已经在除了微软Edge外其他浏览器中可用，但是我们并不需要担心，因为已经有<a target="_blank" rel="noopener" href="https://github.com/webcomponents/webcomponentsjs">Polyfills</a>可以解决这个问题。</p>
<p>Web组件由3个主要的技术组成，他们是主要支柱并作为API来构建Web组件。</p>
<ul>
<li>自定义元素(Custom Elements)</li>
<li>模板(Templates)</li>
<li>影子DOM(Shadow DOM)</li>
</ul>
<p>让我们来进一步了解这些技术。</p>
<h3 id="1-自定义元素-Custom-Elements"><a href="#1-自定义元素-Custom-Elements" class="headerlink" title="1. 自定义元素(Custom Elements)"></a>1. 自定义元素(Custom Elements)</h3><p>这些是JavaScript API的集合，可以帮助你创建自己的HTML元素，并且控制你的DOM和行为。我们可以构建他们的层级和指示他们对行为变化做出的响应。例如，你可以创建一个元素像这样<code>&lt;my-element&gt;&lt;/my-element&gt;</code>。</p>
<h3 id="2-模板-Templates"><a href="#2-模板-Templates" class="headerlink" title="2. 模板(Templates)"></a>2. 模板(Templates)</h3><p>模板是用户定义的模板在页面加载时并不渲染。之后可以通过创建一个组件实例来多次复用。</p>
<h3 id="3-影子DOM-Shadow-DOM"><a href="#3-影子DOM-Shadow-DOM" class="headerlink" title="3. 影子DOM(Shadow DOM)"></a>3. 影子DOM(Shadow DOM)</h3><p>影子DOM是JavaScript API组合用以连接封装的DOM。这将会从主文档对象模型中独立渲染，并且他们的行为特性将会保持私有，因此代码片段就不会和代码结构中的其他部分冲突。使用影子DOM后CSS和JavaScript就会像<code>&lt;iframe&gt;</code>一样分离。</p>
<h3 id="生命周期回调"><a href="#生命周期回调" class="headerlink" title="生命周期回调"></a>生命周期回调</h3><p>生命周期回调是定义在自定义元素类定义中的函数。他们有自己唯一的定义目的。他们用于操作我们自定义元素的行为。</p>
<ul>
<li><code>connectedCallback</code>: 这个特殊的函数会在我们的自定义元素初始连接到DOM时进行调用。</li>
<li><code>adoptedCallback</code>: 这个函数会在我们的自定义函数移动到一个新的文档时调用。</li>
<li><code>attributeChangedCallback</code>: 如果在我们的自定义元素中有属性变化，例如属性的变更、增加或者删掉，这个特殊的函数会被调用。</li>
<li><code>disconnectedCallback</code>: 这个特殊的函数当我们的自定义元素从DOM中断开时调用。</li>
</ul>
<p>现在让我们来看看如何使用原生JavaScript来创建一个Web组件。通过做完这个教程，你可以了解Web组件。</p>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><h3 id="我们要构建什么？"><a href="#我们要构建什么？" class="headerlink" title="我们要构建什么？"></a>我们要构建什么？</h3><p>我们要构建一个显示一张当前热门图片的Web组件。我们会使用Giphy API来获取gif，你的代码结构在实现完成后会是如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--index.html</span><br><span class="line">--card.js</span><br><span class="line">--services.js</span><br></pre></td></tr></table></figure>

<h3 id="构建教程"><a href="#构建教程" class="headerlink" title="构建教程"></a>构建教程</h3><p>首先，我们要创建一个类来包含我们想创建的Web组件的行为。创建一个<code>card.js</code>的文件，并创建一个如下的类。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CardComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HTMLElement</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> ()&#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Your implementaion goes here</span></span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在类的构造函数中，你需要通过<code>Element.attachShadow()</code>方法将影子DOM的影子根(shadow root)添加到文档的当前HTML元素中。接着使用<code>&lt;template&gt;</code>标签在<code>index.html</code>文件中创建HTML模板。这个模板如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;card-view&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Web Component<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span>Example<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;gif-view&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在添加模板到我们的<code>index.html</code>文件中后，我们可以使用DOM方法来克隆上面的模板并添加到我们的影子DOM。这需要在构造函数中完成。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CardComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HTMLElement</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> ()&#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="keyword">const</span> shadow = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123;<span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span>&#125;);</span><br><span class="line">       </span><br><span class="line">        <span class="comment">// Clone the template so that it can be attched to the shadowroot                     </span></span><br><span class="line">        <span class="keyword">const</span> template = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;card-view&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> templateInstance = template.<span class="property">content</span>.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span><br><span class="line">        shadow.<span class="title function_">appendChild</span>(templateInstance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>就像我之前提到的，我们应该再写一个函数来从Giphy API中获取gif。从API中我们将获取到当前热门的图片，以及这个图片上传者提供的标题。在我们开始写这个函数前，先创建一个单独的文件<code>services.js</code>用以放置URL和API key。创建文件并放置以下代码和你申请的API key。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_KEY</span> = <span class="string">&#x27;*YOUR_API_KEY*&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> url = <span class="string">`http://api.giphy.com/v1/gifs/trending?api_key=`</span> + <span class="variable constant_">API_KEY</span> + <span class="string">`&amp;limit=1`</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="variable constant_">API_KEY</span>, url&#125;; <span class="comment">// export the url so that i can be used extrnally.</span></span><br></pre></td></tr></table></figure>

<p>创建<code>services.js</code>文件后，添加以下的代码到你的<code>card.js</code>文件顶部，这样你就可以使用URL来获取gif图片了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; url &#125; <span class="keyword">from</span> <span class="string">&#x27;./services.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>你可以从这个链接获取你自己的API key: <a target="_blank" rel="noopener" href="https://developers.giphy.com/">https://developers.giphy.com/</a></p>
<p>跳回到<code>card.js</code>文件，并添加以下函数:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params">shadowElem, data</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> shadowRoot = shadowElem.<span class="property">shadowRoot</span>;</span><br><span class="line">    shadowRoot.<span class="title function_">getElementById</span>(<span class="string">&#x27;card-title&#x27;</span>).<span class="property">innerHTML</span> = data.<span class="property">name</span>;</span><br><span class="line">    shadowRoot.<span class="title function_">getElementById</span>(<span class="string">&#x27;gif-view&#x27;</span>).<span class="property">src</span> = data.<span class="property">url</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> fetchFromGiphy ()&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">  <span class="keyword">const</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br><span class="line">  <span class="keyword">const</span> gifUrl = json[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;0&#x27;</span>].<span class="property">images</span>[<span class="string">&#x27;fixed_height_small&#x27;</span>].<span class="property">url</span>;</span><br><span class="line">  <span class="keyword">const</span> gifName = json[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;0&#x27;</span>].<span class="property">title</span>;</span><br><span class="line">  <span class="keyword">const</span> gifObject = &#123;</span><br><span class="line">     <span class="attr">name</span>: gifName,</span><br><span class="line">     <span class="attr">url</span>: gifUrl</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> gifObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>让我来解释一下这些函数。</p>
<p><code>fetchFromGiphy()</code>: 这个函数使用async&#x2F;await获取热门的gif和这个gif的标题，并作为对象进行返回。</p>
<p><code>render()</code>: 这个函数用于注入值到影子DOM的元素中。</p>
<p>接着，让这些函数在生命周期回调中被调用。实际上，我们需要当我们的自定义元素连接到DOM时调用这两个函数。我们有<code>connectedCallback()</code>函数来实现。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">connectedCallback</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">gifObj</span> = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">fetchFromGiphy</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">render</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">gifObj</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，使用<code>customElements.define()</code>函数来定义我们的自定义元素。当定义一个自定义元素时，有一些基本原则需要记在心里。<code>define()</code>函数的第一个参数应该是代码自定义元素名称的字符串。他们不能是一个单独的单词，而是由<code>-</code>字符在中间。第二个参数我们的定义元素行为的类对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customElements.<span class="title function_">define</span>(‘card-component’, <span class="title class_">CardComponent</span>);</span><br></pre></td></tr></table></figure>

<p>现在你已经定义了你的组件，添加<code>card.js</code>文件到你的<code>index.html</code>文件中。你可以在HTML文档的任意地方使用<code>&lt;card-component&gt;</code>元素。最后的<code>index.html</code>如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Web Component<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;card-view&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Web Component<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span>Example<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;gif-view&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">card-component</span>&gt;</span><span class="tag">&lt;/<span class="name">card-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./card.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为了运行，你需要一个服务器。从命令行中全局安装<code>static-server</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g static-server</span><br></pre></td></tr></table></figure>

<p>从你的Web组件项目目录下运行<code>static-server</code>命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static-server</span><br></pre></td></tr></table></figure>

<p>好了，恭喜！你现在已经拥有你自己的组件。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>这篇文章总结了Web组件的基础。这是Web组件的理论和实现。Web组件在帮助代码复用上很有用。你可以从这个<a target="_blank" rel="noopener" href="https://github.com/thivatm/web-comp">项目</a>中检出所有代码。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/06/16/web-component-in-a-nutshell/" data-id="cl2oo8kak00932224fnqd75mc" data-title="Web Component入门" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web-component/" rel="tag">web component</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web%E7%BB%84%E4%BB%B6/" rel="tag">web组件</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-es6-module-share" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/05/05/es6-module-share/" class="article-date">
  <time class="dt-published" datetime="2019-05-04T22:50:56.000Z" itemprop="datePublished">2019-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/05/05/es6-module-share/">ES6模块-团队分享</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ul>
<li>前端模块化的历史</li>
<li>ES6模块的使用</li>
<li>ES6模块背后的思考</li>
<li>组件和模块</li>
<li>参考文章</li>
</ul>
<h2 id="前端模块化的历史"><a href="#前端模块化的历史" class="headerlink" title="前端模块化的历史"></a>前端模块化的历史</h2><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5c82323ce51d453a5f22b281">前端模块化的历史</a></p>
<ul>
<li>全局Function模式</li>
<li>命名空间模式</li>
<li>IIFE模式</li>
<li>IIFE模式(引入依赖)</li>
<li>CommonJS</li>
<li>AMD</li>
<li>CMD</li>
<li>ES6 模块</li>
</ul>
<h2 id="ES6模块的使用"><a href="#ES6模块的使用" class="headerlink" title="ES6模块的使用"></a>ES6模块的使用</h2><h3 id="什么是模块"><a href="#什么是模块" class="headerlink" title="什么是模块?"></a>什么是模块?</h3><p>模块是通过不同于脚本的形式进行加载的JavaScript文件。区别在于:</p>
<ol>
<li>模块代码自动运行在严格模式，并无法退出</li>
<li>模块中定义的变量只在模块的作用域中存在，不会自动添加到全局的作用域</li>
<li>模块中的<code>this</code>是<code>undefined</code></li>
<li>模块中不支持HTML风格的注释<code>&lt;!-- comments --&gt;</code></li>
<li><strong>模块必须要导出任何可以在模块外可用的一切</strong></li>
<li>模块可以从其他模块导入内容</li>
</ol>
<h3 id="基本导出"><a href="#基本导出" class="headerlink" title="基本导出"></a>基本导出</h3><p>使用<code>export</code>关键字可以从模块中导出变量、函数和类:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export data</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> color = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">&quot;Nicholas&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> magicNumber = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export function</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export class</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">length, width</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">length</span> = length;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this function is private to the module</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">subtract</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define a function...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...and then export it later</span></span><br><span class="line"><span class="keyword">export</span> &#123; multiply &#125;;</span><br></pre></td></tr></table></figure>

<p>导出说明:</p>
<ol>
<li>每个导出的函数和类都有一个名字，除了使用<code>default</code>关键字外无法使用上面的语法导出匿名函数和类</li>
<li>查看<code>multiply()</code>函数，你可以不导出声明，支持导出引用</li>
<li>查看<code>substract()</code>函数，外部不可访问，没有显式导出的变量、函数和类对于模块是私有的</li>
</ol>
<h3 id="基本导入"><a href="#基本导入" class="headerlink" title="基本导入"></a>基本导入</h3><p>基本格式:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; identifier1, identifier2 &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>说明: 从一个模块中导入一个绑定，就类似定义一个<code>const</code>的内容，也就是无法定义重名变量、导入前使用和修改值。</p>
<h4 id="导入一个单一绑定"><a href="#导入一个单一绑定" class="headerlink" title="导入一个单一绑定"></a>导入一个单一绑定</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import just one</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));     <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">sum = <span class="number">1</span>;        <span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<p>尽管<code>example.js</code>中定义了多个导出，你可以只导入其中一个；为了在浏览器和Node.js中保持兼容性，尽量在文件名前使用相对路径。</p>
<h4 id="导入多个绑定"><a href="#导入多个绑定" class="headerlink" title="导入多个绑定"></a>导入多个绑定</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import multiple</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum, multiply, magicNumber &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, magicNumber));   <span class="comment">// 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">1</span>, <span class="number">2</span>));        <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h4 id="全部导入"><a href="#全部导入" class="headerlink" title="全部导入"></a>全部导入</h4><p>特殊的应用场景支持导入整个模块作为一个对象，类似导入一个库文件，所有的模块导出均作为对象属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import everything</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> example <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(example.<span class="title function_">sum</span>(<span class="number">1</span>,</span><br><span class="line">        example.<span class="property">magicNumber</span>));          <span class="comment">// 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(example.<span class="title function_">multiply</span>(<span class="number">1</span>, <span class="number">2</span>));    <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>不管多少次使用<code>import</code>对一个模块进行导入操作，模块只会执行一次；在导入模块的代码执行后，实例化的模块在保存在内存中并在其他<code>import</code>语句使用时复用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; multiply &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; magicNumber &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>代码中<code>example.js</code>只会执行一次.</p>
<p>模块语法不支持在语句或者函数中使用，也就是说不支持动态的导入和导出。<a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-dynamic-import">ECMAScript dynamic-import Stage3 </a></p>
<h4 id="导入绑定的修改"><a href="#导入绑定的修改" class="headerlink" title="导入绑定的修改"></a>导入绑定的修改</h4><p>对导入的内容是无法修改的，但是在模块内部可以。</p>
<p>模块导出:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> name = <span class="string">&quot;Nicholas&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setName</span>(<span class="params">newName</span>) &#123;</span><br><span class="line">    name = newName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模块导入:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; name, setName &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);       <span class="comment">// &quot;Nicholas&quot;</span></span><br><span class="line"><span class="title function_">setName</span>(<span class="string">&quot;Greg&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);       <span class="comment">// &quot;Greg&quot;</span></span><br><span class="line"></span><br><span class="line">name = <span class="string">&quot;Nicholas&quot;</span>;       <span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<p><code>setName</code>函数回到模块内执行并修改变量<code>name</code>的内容，随后这个修改会反映到导入的<code>name</code>这个绑定。</p>
<h3 id="重命名导出和导入"><a href="#重命名导出和导入" class="headerlink" title="重命名导出和导入"></a>重命名导出和导入</h3><p>有时候，你可能不想使用变量、函数、类在模块中的原始名字，你可以在导入和导出的时候使用<code>as</code>关键字来指定新的名字</p>
<p>导出时重命名</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; sum <span class="keyword">as</span> add &#125;;</span><br></pre></td></tr></table></figure>

<p>导入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>导入时重命名</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add <span class="keyword">as</span> sum &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> add);            <span class="comment">// &quot;undefined&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));             <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="模块中的默认值"><a href="#模块中的默认值" class="headerlink" title="模块中的默认值"></a>模块中的默认值</h3><p>模块中的默认值是指使用<code>default</code>指定的一个单独变量、函数或者类，每个模块中只能设定一个默认导出，指定多个默认导出会报语法错误。</p>
<h4 id="导出默认值"><a href="#导出默认值" class="headerlink" title="导出默认值"></a>导出默认值</h4><p><strong>直接导出</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数可以不写名字，因为模块本身代表这个函数。</p>
<p><strong>导出引用</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sum;</span><br></pre></td></tr></table></figure>

<p><strong>重命名导出</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; sum <span class="keyword">as</span> <span class="keyword">default</span> &#125;;</span><br></pre></td></tr></table></figure>

<h4 id="导入默认值"><a href="#导入默认值" class="headerlink" title="导入默认值"></a>导入默认值</h4><p><code>javascript</code><br>&#x2F;&#x2F; import the default<br>import sum from “.&#x2F;example.js”;</p>
<p>console.log(sum(1, 2));     &#x2F;&#x2F; 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 默认导入不需要大括号</span><br><span class="line">2. 名称可以代表任意模块中的默认函数</span><br><span class="line">3. 默认导入的语法是最精简的，ES6模块规范制定者希望默认值作为主流的使用场景</span><br><span class="line"></span><br><span class="line">**具名和默认混合**</span><br><span class="line">```javascript</span><br><span class="line">export let color = &quot;red&quot;;</span><br><span class="line"></span><br><span class="line">export default function(num1, num2) &#123;</span><br><span class="line">    return num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sum, &#123; color &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));     <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color);         <span class="comment">// &quot;red&quot;</span></span><br></pre></td></tr></table></figure>

<p>默认值要在非默认值前面导入。</p>
<p><strong>重命名默认值</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// equivalent to previous example</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> sum, color &#125; <span class="keyword">from</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));     <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color);         <span class="comment">// &quot;red&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="重新导出一个绑定"><a href="#重新导出一个绑定" class="headerlink" title="重新导出一个绑定"></a>重新导出一个绑定</h3><p>几种重新导出的方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; sum &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; sum <span class="keyword">as</span> add &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>全部导出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>这里只能导出所有的具名导出，不包括默认导出。如果要处理默认导出，你需要显式的导入后再导出。</p>
<h3 id="没有绑定的导入"><a href="#没有绑定的导入" class="headerlink" title="没有绑定的导入"></a>没有绑定的导入</h3><p>有些模块并没有导出任何内容，仅仅是在全局作用域中做了些修改；虽然模块无法直接修改全局作用域的变量、函数和类，但是对于內建对象的修改可以反映到其他模块中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module code without exports or imports</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">pushAll</span> = <span class="keyword">function</span>(<span class="params">items</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// items must be an array</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(items)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Argument must be an array.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use built-in push() and spread operator</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">push</span>(...items);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这个模块对<code>Array</code>原型增加一个<code>pushAll</code>方法.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./example.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> items = [];</span><br><span class="line"></span><br><span class="line">items.<span class="title function_">pushAll</span>(colors);</span><br></pre></td></tr></table></figure>
<p>这段代码导入和执行模块代码，添加<code>pushAll</code>方法到array原型中。</p>
<p>没有绑定的导入通常用于创建polyfill或者shim。</p>
<h3 id="加载ES6-模块"><a href="#加载ES6-模块" class="headerlink" title="加载ES6 模块"></a>加载ES6 模块</h3><ul>
<li><p>使用打包工具和Babel转译为ES5</p>
</li>
<li><p>使用<code>script</code>标签，并设置<code>type</code>为<code>module</code>(IE11不兼容，使用前查看<a target="_blank" rel="noopener" href="https://caniuse.com/#search=script%20module">兼容性</a>)</p>
</li>
</ul>
<p>默认使用<code>defer</code>属性，按照代码出现的顺序进行加载，执行需要在文档解析完成后，执行顺序也是按照代码出现的顺序。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="variable language_">this</span> will execute first --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;module1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="variable language_">this</span> will execute second --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./example.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="variable language_">this</span> will execute third --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;module2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果模块代码中又引入其他的模块，执行的顺序会变得复杂一些:</p>
<p><strong>加载顺序</strong>:</p>
<ol>
<li>Download and parse module1.js.</li>
<li>Recursively download and parse import resources in module1.js.</li>
<li>Parse the inline module.</li>
<li>Recursively download and parse import resources in the inline module.</li>
<li>Download and parse module2.js.</li>
<li>Recursively download and parse import resources in module2.js</li>
</ol>
<p><strong>执行顺序</strong>:</p>
<ol>
<li>Recursively execute import resources for module1.js.</li>
<li>Execute module1.js.</li>
<li>Recursively execute import resources for the inline module.</li>
<li>Execute the inline module.</li>
<li>Recursively execute import resources for module2.js.</li>
<li>Execute module2.js.</li>
</ol>
<ul>
<li>web worker</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// load module.js as a module</span></span><br><span class="line"><span class="keyword">let</span> worker = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;module.js&quot;</span>, &#123; <span class="attr">type</span>: <span class="string">&quot;module&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ES6模块背后的思考"><a href="#ES6模块背后的思考" class="headerlink" title="ES6模块背后的思考"></a>ES6模块背后的思考</h2><p>对比CommonJS和AMD</p>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><p>在Node.js中的主要实现方式，特性如下:</p>
<ul>
<li>紧凑的语法</li>
<li>同步加载</li>
<li>主要使用: 服务端</li>
</ul>
<h3 id="Asynchronous-Module-Definition-AMD"><a href="#Asynchronous-Module-Definition-AMD" class="headerlink" title="Asynchronous Module Definition(AMD)"></a>Asynchronous Module Definition(AMD)</h3><p>主要的实现是<a target="_blank" rel="noopener" href="http://requirejs.org/"><code>RequireJS</code></a>，特性如下:</p>
<ul>
<li>稍微复杂的语法</li>
<li>异步加载</li>
<li>主要使用: 浏览器</li>
</ul>
<h3 id="ES6模块"><a href="#ES6模块" class="headerlink" title="ES6模块"></a>ES6模块</h3><p><strong>目标</strong>:</p>
<ul>
<li>偏爱默认导出</li>
<li>静态模块结构</li>
<li>支持同步和异步加载</li>
<li>支持模块间的循环依赖</li>
</ul>
<p><strong>优势</strong>:</p>
<ul>
<li>比CommonJS更紧凑的语法</li>
<li>结构可以被静态分析(静态检测、优化等)</li>
<li>对循环引用比CommonJS更好</li>
<li>支持异步加载</li>
</ul>
<p>八卦: ES6 Module的主要设计者Dave Herman和Sam Tobin Hochstadt。</p>
<h2 id="组件和模块"><a href="#组件和模块" class="headerlink" title="组件和模块"></a>组件和模块</h2><ul>
<li>模块为基础，组件基于模块</li>
<li>组件侧重UI封装，针对，包括html,css,js和image；模块侧重数据、功能封装</li>
</ul>
<p>组件化参考<a target="_blank" rel="noopener" href="https://github.com/fouber/blog/issues/10">张云龙-前端工程</a></p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5c82323ce51d453a5f22b281">从前端模块化编程切入项聊聊前端的未来</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/seajs/seajs/issues/588">前端模块化开发那点历史</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.freecodecamp.org/javascript-modules-a-beginner-s-guide-783f7d7a5fcc">JavaScript Modules: A Beginner’s Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/primers/modules">Using JavaScript modules on the web</a></li>
<li><a target="_blank" rel="noopener" href="https://eloquentjavascript.net/10_modules.html">Modules in eloquent javascript</a></li>
<li><a target="_blank" rel="noopener" href="http://exploringjs.com/es6/ch_modules.html">Modules in exploringjs</a></li>
<li><a target="_blank" rel="noopener" href="https://jsmodules.io/">jsmodules</a></li>
<li><a target="_blank" rel="noopener" href="https://addyosmani.com/writing-modular-js/">writing modular js</a></li>
<li><a target="_blank" rel="noopener" href="http://2ality.com/2014/09/es6-modules-final.html">ECMAScript 6 modules: the final syntax</a></li>
<li><a target="_blank" rel="noopener" href="https://hacks.mozilla.org/2015/08/es6-in-depth-modules/">ES6 in depth: modules</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-dynamic-import">proposal-dynamic-import</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nzakas/understandinges6/blob/master/manuscript/13-Modules.md">understandinges6-Modules</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/05/05/es6-module-share/" data-id="cl2oo8k86003z2224bhbpb620" data-title="ES6模块-团队分享" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/" rel="tag">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%A2%E9%98%9F%E5%88%86%E4%BA%AB/" rel="tag">团队分享</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" rel="tag">模块化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-es6-modules" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/04/20/es6-modules/" class="article-date">
  <time class="dt-published" datetime="2019-04-20T01:22:01.000Z" itemprop="datePublished">2019-04-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/04/20/es6-modules/">ES6中的模块化</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>这里主要是针对ES6 Module技术出现的讨论，对比历史的一些模块化解决方案。</p>
<h2 id="背景、初衷、目标"><a href="#背景、初衷、目标" class="headerlink" title="背景、初衷、目标"></a>背景、初衷、目标</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>简单的讲，随着前端应用的日益庞大和复杂，对于代码的拆分复用要求更高，也就出现了对代码模块化的需求。</p>
<p>在ES6 Module出现前，社区中出现的两个方案CommonJS和AMD：</p>
<h4 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h4><p>在Node.js中的主要实现方式，特性如下:</p>
<ul>
<li>紧凑的语法</li>
<li>同步加载</li>
<li>主要使用: 服务端</li>
</ul>
<h4 id="Asynchronous-Module-Definition-AMD"><a href="#Asynchronous-Module-Definition-AMD" class="headerlink" title="Asynchronous Module Definition(AMD)"></a>Asynchronous Module Definition(AMD)</h4><p>主要的实现是<a target="_blank" rel="noopener" href="http://requirejs.org/"><code>RequireJS</code></a>，特性如下:</p>
<ul>
<li>稍微复杂的语法</li>
<li>异步加载</li>
<li>主要使用: 浏览器</li>
</ul>
<p>这里提一句，ES6 Module的主要设计者Dave Herman 和 Sam Tobin Hochstadt。</p>
<h3 id="初衷"><a href="#初衷" class="headerlink" title="初衷"></a>初衷</h3><p>这里讲的ES6 Module的设计初衷，在ES6 Module出现前社区已经在模块化上有一些令人印象深刻的变通方案，以CommonJS和AMD为代表，这两者各有优缺点并且不兼容，因此ES6 Module的设计初衷是为了吸取这两者的优点实现ECMAScript的标准。</p>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>ES6 Module的目标是出一个让CommonJS和AMD社区都能接受的方案：</p>
<ul>
<li>偏爱默认导出</li>
<li>静态模块结构</li>
<li>支持同步和异步加载</li>
<li>支持模块间的循环依赖</li>
</ul>
<h2 id="优势和劣势-trade-off"><a href="#优势和劣势-trade-off" class="headerlink" title="优势和劣势(trade-off)"></a>优势和劣势(trade-off)</h2><p>ES6 Module实际达成的方案特性如下:</p>
<ul>
<li>比CommonJS更紧凑的语法</li>
<li>结构可以被静态分析(静态检测、优化等)</li>
<li>对循环引用比CommonJS更好</li>
<li>支持异步加载</li>
</ul>
<h2 id="适用的场景-业务场景、技术场景"><a href="#适用的场景-业务场景、技术场景" class="headerlink" title="适用的场景(业务场景、技术场景)"></a>适用的场景(业务场景、技术场景)</h2><p>适用于浏览器端和服务端(Nodejs)，目前(2019年)主流的浏览器大部分都不支持ES6 Module的特性，因此使用的话还得使用Babel来转译。</p>
<h2 id="组成部分和关键点"><a href="#组成部分和关键点" class="headerlink" title="组成部分和关键点"></a>组成部分和关键点</h2><p>ES6 Module分两部分:</p>
<ul>
<li>声明式语法(import和export)</li>
<li>编程式加载API: 支持配置如何加载模块以及条件加载</li>
</ul>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="在浏览器侧的使用"><a href="#在浏览器侧的使用" class="headerlink" title="在浏览器侧的使用"></a>在浏览器侧的使用</h3><h4 id="使用-lt-script-gt-进行加载"><a href="#使用-lt-script-gt-进行加载" class="headerlink" title="使用&lt;script&gt;进行加载"></a>使用<code>&lt;script&gt;</code>进行加载</h4><p>通过<code>type</code>属性值为<code>module</code>来标识模块进行加载，支持外部文件和内联的方式，默认使用<code>defer</code>的行为，也可以指定<code>async</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- load a module JavaScript file --&gt;</span><br><span class="line">&lt;script type=&quot;module&quot; src=&quot;module.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- include a module inline --&gt;</span><br><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line"></span><br><span class="line">import &#123; sum &#125; from &quot;./example.js&quot;;</span><br><span class="line"></span><br><span class="line">let result = sum(1, 2);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="通过Worker进行加载"><a href="#通过Worker进行加载" class="headerlink" title="通过Worker进行加载"></a>通过<code>Worker</code>进行加载</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// load module.js as a module</span></span><br><span class="line"><span class="keyword">let</span> worker = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;module.js&quot;</span>, &#123; <span class="attr">type</span>: <span class="string">&quot;module&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="通过打包工具进行打包"><a href="#通过打包工具进行打包" class="headerlink" title="通过打包工具进行打包"></a>通过打包工具进行打包</h4><p>使用<code>webpack</code>或者<code>browserify</code>等打包工具进行打包后使用。</p>
<h3 id="声明式语法"><a href="#声明式语法" class="headerlink" title="声明式语法"></a>声明式语法</h3><p>声明式语法分为两种类型：具名导出(每个模块有多个)和默认导出(每个模块一个)。</p>
<h4 id="具名导出-named-exports"><a href="#具名导出-named-exports" class="headerlink" title="具名导出(named exports)"></a>具名导出(named exports)</h4><p>通过关键字<code>export</code>前缀可以导出多个内容，并有名称来进行区分。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------ lib.js ------</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sqrt = <span class="title class_">Math</span>.<span class="property">sqrt</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">square</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">diag</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">sqrt</span>(<span class="title function_">square</span>(x) + <span class="title function_">square</span>(y));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------ main.js ------</span></span><br><span class="line"><span class="keyword">import</span> &#123; square, diag &#125; <span class="keyword">from</span> <span class="string">&#x27;lib&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">square</span>(<span class="number">11</span>)); <span class="comment">// 121</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">diag</span>(<span class="number">4</span>, <span class="number">3</span>)); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h4 id="默认导出-default-exports"><a href="#默认导出-default-exports" class="headerlink" title="默认导出(default exports)"></a>默认导出(default exports)</h4><p>一个模块只有一个默认导出，并且默认导出尤其容易进行导入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------ myFunc.js ------</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------ main1.js ------</span></span><br><span class="line"><span class="keyword">import</span> myFunc <span class="keyword">from</span> <span class="string">&#x27;myFunc&#x27;</span>;</span><br><span class="line"><span class="title function_">myFunc</span>();</span><br></pre></td></tr></table></figure>

<p>对于class的使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------ MyClass.js ------</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------ main2.js ------</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyClass</span> <span class="keyword">from</span> <span class="string">&#x27;MyClass&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> inst = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br></pre></td></tr></table></figure>

<p>默认导出其实可以理解为特殊的具名导出</p>
<p>导入:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> foo &#125; <span class="keyword">from</span> <span class="string">&#x27;lib&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">&#x27;lib&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>导出:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------ module1.js ------</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------ module2.js ------</span></span><br><span class="line"><span class="keyword">const</span> D = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; D <span class="keyword">as</span> <span class="keyword">default</span> &#125;;</span><br></pre></td></tr></table></figure>

<h4 id="答疑"><a href="#答疑" class="headerlink" title="答疑"></a>答疑</h4><ul>
<li>为什么我们需要具名导出(named exports)?</li>
</ul>
<blockquote>
<p>The answer is that you can’t enforce a static structure via objects and lose all of the associated advantages (described in the next section).</p>
</blockquote>
<blockquote>
<p>如果通过对象进行导出会丢失静态结构，从而失去原先的优势。</p>
</blockquote>
<ul>
<li>ES6 Module输出的是值的引用，并且是在编译时输出接口。</li>
</ul>
<h3 id="编程式语法"><a href="#编程式语法" class="headerlink" title="编程式语法"></a>编程式语法</h3><p>针对ES6 Module的编程式实现，目前规范处于stage 3。</p>
<p>使用编程式语法，可以做到:</p>
<ul>
<li>对模块和脚本进行编程操作</li>
<li>配置模块的加载</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;nav&gt;</span><br><span class="line">  &lt;a href=&quot;books.html&quot; data-entry-module=&quot;books&quot;&gt;Books&lt;/a&gt;</span><br><span class="line">  &lt;a href=&quot;movies.html&quot; data-entry-module=&quot;movies&quot;&gt;Movies&lt;/a&gt;</span><br><span class="line">  &lt;a href=&quot;video-games.html&quot; data-entry-module=&quot;video-games&quot;&gt;Video Games&lt;/a&gt;</span><br><span class="line">&lt;/nav&gt;</span><br><span class="line"></span><br><span class="line">&lt;main&gt;Content will load here!&lt;/main&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const main = document.querySelector(&quot;main&quot;);</span><br><span class="line">  for (const link of document.querySelectorAll(&quot;nav &gt; a&quot;)) &#123;</span><br><span class="line">    link.addEventListener(&quot;click&quot;, e =&gt; &#123;</span><br><span class="line">      e.preventDefault();</span><br><span class="line"></span><br><span class="line">      import(`./section-modules/$&#123;link.dataset.entryModule&#125;.js`)</span><br><span class="line">        .then(module =&gt; &#123;</span><br><span class="line">          module.loadPageInto(main);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(err =&gt; &#123;</span><br><span class="line">          main.textContent = err.message;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="已有的实现和它之间的对比"><a href="#已有的实现和它之间的对比" class="headerlink" title="已有的实现和它之间的对比"></a>已有的实现和它之间的对比</h2><p>有关模块化的进程，<a target="_blank" rel="noopener" href="https://juejin.im/post/5c17ad756fb9a049ff4e0a62">前端模块化详解</a>一句讲解得比较详细了，可以参考。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5c82323ce51d453a5f22b281">从前端模块化编程切入项聊聊前端的未来</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/seajs/seajs/issues/588">前端模块化开发那点历史</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.freecodecamp.org/javascript-modules-a-beginner-s-guide-783f7d7a5fcc">JavaScript Modules: A Beginner’s Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/primers/modules">Using JavaScript modules on the web</a></li>
<li><a target="_blank" rel="noopener" href="https://eloquentjavascript.net/10_modules.html">Modules in eloquent javascript</a></li>
<li><a target="_blank" rel="noopener" href="http://exploringjs.com/es6/ch_modules.html">Modules in exploringjs</a></li>
<li><a target="_blank" rel="noopener" href="https://jsmodules.io/">jsmodules</a></li>
<li><a target="_blank" rel="noopener" href="https://addyosmani.com/writing-modular-js/">writing modular js</a></li>
<li><a target="_blank" rel="noopener" href="http://2ality.com/2014/09/es6-modules-final.html">ECMAScript 6 modules: the final syntax</a></li>
<li><a target="_blank" rel="noopener" href="https://hacks.mozilla.org/2015/08/es6-in-depth-modules/">ES6 in depth: modules</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-dynamic-import">proposal-dynamic-import</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/04/20/es6-modules/" data-id="cl2oo8k88004322244m5o0ivs" data-title="ES6中的模块化" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/" rel="tag">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" rel="tag">模块化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ARTS-migarate-to-github" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/23/ARTS-migarate-to-github/" class="article-date">
  <time class="dt-published" datetime="2019-03-23T15:00:58.000Z" itemprop="datePublished">2019-03-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ARTS/">ARTS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/23/ARTS-migarate-to-github/">ARTS相关内容更新到Github上</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>由于ARTS的更新频率较高，个人感觉不太适合放在博客中更新，因此把ARTS放在Github上进行<br>保存。更新的频率在1周或2周更新一个内容，根据内容选择的深度和量。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/perry2008084/ARTS">ARTS访问入口</a>: <a target="_blank" rel="noopener" href="https://github.com/perry2008084/ARTS">https://github.com/perry2008084/ARTS</a></p>
<blockquote>
<p>关于坚持ARTS的一些感悟，每周坚持ARTS，能够让自己保持对技术和英语的持续学习，也能<br>够不断的积累,总之，好处多多。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.bookcell.org/2019/03/23/ARTS-migarate-to-github/" data-id="cl2oo8k5r000r2224cj90hv3d" data-title="ARTS相关内容更新到Github上" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ARTS/" rel="tag">ARTS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/" rel="tag">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Review/" rel="tag">Review</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Share/" rel="tag">Share</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Technique/" rel="tag">Technique</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/4/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ARTS/">ARTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/">读书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/interval/" rel="tag">$interval</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timeout/" rel="tag">$timeout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uibModal/" rel="tag">$uibModal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2017/" rel="tag">2017</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2018/" rel="tag">2018</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2019/" rel="tag">2019</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2020/" rel="tag">2020</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2021/" rel="tag">2021</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/APP/" rel="tag">APP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARTS/" rel="tag">ARTS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/" rel="tag">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/" rel="tag">AngularJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angularjs/" rel="tag">Angularjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/" rel="tag">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BSD/" rel="tag">BSD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BT/" rel="tag">BT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BrowserSync/" rel="tag">BrowserSync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Creative-Commons/" rel="tag">Creative Commons</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/D2/" rel="tag">D2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/D3/" rel="tag">D3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Visualization/" rel="tag">Data Visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECMAScript/" rel="tag">ECMAScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/" rel="tag">ES6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Echarts/" rel="tag">Echarts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FE/" rel="tag">FE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPL/" rel="tag">GPL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kindle/" rel="tag">Kindle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIT/" rel="tag">MIT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mozila/" rel="tag">Mozila</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Next/" rel="tag">Next</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React-Router/" rel="tag">React Router</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reactjs/" rel="tag">Reactjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redux/" rel="tag">Redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Review/" rel="tag">Review</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEE-Conf/" rel="tag">SEE Conf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SMART%E6%B3%95%E5%88%99/" rel="tag">SMART法则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Share/" rel="tag">Share</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spec/" rel="tag">Spec</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SublimeLInter/" rel="tag">SublimeLInter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Technique/" rel="tag">Technique</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/URL/" rel="tag">URL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Virtual-DOM/" rel="tag">Virtual DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WWW/" rel="tag">WWW</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web-%E5%AE%89%E5%85%A8-%E5%89%8D%E7%AB%AF/" rel="tag">Web, 安全, 前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/absolute/" rel="tag">absolute</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ag-grid/" rel="tag">ag-grid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angularjs/" rel="tag">angularjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/background/" rel="tag">background</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/baidumap/" rel="tag">baidumap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/" rel="tag">cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/" rel="tag">chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cli/" rel="tag">cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cookie/" rel="tag">cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/custom/" rel="tag">custom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/d2/" rel="tag">d2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data/" rel="tag">data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/default/" rel="tag">default</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echarts/" rel="tag">echarts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/editor/" rel="tag">editor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/editorconfig/" rel="tag">editorconfig</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es5/" rel="tag">es5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/" rel="tag">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/essential/" rel="tag">essential</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/export/" rel="tag">export</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flexbox/" rel="tag">flexbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/float/" rel="tag">float</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitignore/" rel="tag">gitignore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/" rel="tag">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/" rel="tag">grid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html%E5%85%A5%E9%97%A8/" rel="tag">html入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html%E5%AD%A6%E4%B9%A0/" rel="tag">html学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i18next/" rel="tag">i18next</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/" rel="tag">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/import/" rel="tag">import</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/" rel="tag">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsconf/" rel="tag">jsconf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsdoc/" rel="tag">jsdoc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/license/" rel="tag">license</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loader/" rel="tag">loader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loading/" rel="tag">loading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/localStorage/" rel="tag">localStorage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/map/" rel="tag">map</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/module/" rel="tag">module</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multi-accout/" rel="tag">multi accout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/named/" rel="tag">named</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/new/" rel="tag">new</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placement/" rel="tag">placement</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prettier/" rel="tag">prettier</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/priciple/" rel="tag">priciple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quirks/" rel="tag">quirks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/recommend/" rel="tag">recommend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/remote/" rel="tag">remote</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/search/" rel="tag">search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/session/" rel="tag">session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sessionStorage/" rel="tag">sessionStorage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/share/" rel="tag">share</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/standard/" rel="tag">standard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/" rel="tag">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime-Text-3/" rel="tag">sublime Text 3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/table/" rel="tag">table</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag/" rel="tag">tag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/theme/" rel="tag">theme</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/url/" rel="tag">url</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/visualization/" rel="tag">visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-component/" rel="tag">web component</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E7%BB%84%E4%BB%B6/" rel="tag">web组件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/" rel="tag">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/" rel="tag">yarn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%89%E6%A0%8F/" rel="tag">三栏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8B%E8%BD%BD/" rel="tag">下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6%E5%8D%95/" rel="tag">书单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6%E6%A0%BC%E5%89%8D%E7%AB%AF/" rel="tag">书格前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%9A%E8%AE%AE/" rel="tag">会议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B1%E4%BA%AB%E6%A1%8C%E9%9D%A2/" rel="tag">共享桌面</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" rel="tag">关键字</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%BB%E7%94%9F/" rel="tag">养生</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-angular-pnpm/" rel="tag">前端开发, angular, pnpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%EF%BC%8C%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE/" rel="tag">前端开发，百度地图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%87%E7%BA%A7/" rel="tag">升级</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B/" rel="tag">原型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/" rel="tag">原型链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E7%90%86/" rel="tag">原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8C%E9%A3%9E%E7%BF%BC/" rel="tag">双飞翼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AA%E7%AE%A1%E5%8E%BB%E5%81%9A/" rel="tag">只管去做</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%A2%E9%98%9F/" rel="tag">团队</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%A2%E9%98%9F%E5%88%86%E4%BA%AB/" rel="tag">团队分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" rel="tag">国际化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E8%A1%A8/" rel="tag">图表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%A3%E6%9D%AF/" rel="tag">圣杯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E8%AF%AD%E8%A8%80/" rel="tag">多语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%B4%E5%83%8F/" rel="tag">头像</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%98%E5%82%A8/" rel="tag">存储</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%8D%93/" rel="tag">安卓</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E6%88%98/" rel="tag">实战</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%B9%E8%B1%A1/" rel="tag">对象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%91%E5%8D%B3%E6%98%AF%E5%A4%9A/" rel="tag">少即是多</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%83%E5%B1%80/" rel="tag">布局</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B4%E5%BA%A6/" rel="tag">年度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE/" rel="tag">开源协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%B9%E6%80%A7%E7%9B%92/" rel="tag">弹性盒</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%AA%E5%BC%82%E6%A8%A1%E5%BC%8F/" rel="tag">怪异模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%84%9F%E6%83%B3/" rel="tag">感想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%87%E5%8D%97/" rel="tag">指南</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/" rel="tag">搜索引擎</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%88%E7%8E%87/" rel="tag">效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%99%E7%A8%8B/" rel="tag">教程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE/" rel="tag">数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">数据可视化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B9%E6%B3%95/" rel="tag">方法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%85%E6%B8%B8/" rel="tag">旅游</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E6%9C%AC/" rel="tag">日本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" rel="tag">最佳实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%87%E5%87%86%E6%A8%A1%E5%BC%8F/" rel="tag">标准模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A6%82%E5%BF%B5/" rel="tag">概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" rel="tag">模块化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%AE%E5%8A%A8/" rel="tag">浮动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E8%AE%B0/" rel="tag">游记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83/" rel="tag">生产环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB/" rel="tag">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%B5%E5%8A%A8%E8%BD%A6/" rel="tag">电动车</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87/" rel="tag">目标</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E4%B9%8E%E4%B8%93%E6%A0%8F/" rel="tag">知乎专栏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%80%E4%BB%8B/" rel="tag">简介</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D/" rel="tag">绝对定位</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%A7%E6%89%BF/" rel="tag">继承</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E6%A0%BC/" rel="tag">网格</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%89%8B%E6%9E%B6/" rel="tag">脚手架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89/" rel="tag">自定义</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9FDOM/" rel="tag">虚拟DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E6%A0%BC/" rel="tag">表格</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%84%E8%8C%83/" rel="tag">规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E5%9D%9B/" rel="tag">论坛</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6/" rel="tag">读书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%AF%E7%94%B1/" rel="tag">路由</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/" rel="tag">远程控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%9F%E5%BA%A6/" rel="tag">速度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%9A/" rel="tag">锚</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A5%AE%E9%A3%9F/" rel="tag">饮食</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/interval/" style="font-size: 10px;">$interval</a> <a href="/tags/timeout/" style="font-size: 10px;">$timeout</a> <a href="/tags/uibModal/" style="font-size: 10px;">$uibModal</a> <a href="/tags/2017/" style="font-size: 10px;">2017</a> <a href="/tags/2018/" style="font-size: 13px;">2018</a> <a href="/tags/2019/" style="font-size: 17px;">2019</a> <a href="/tags/2020/" style="font-size: 14px;">2020</a> <a href="/tags/2021/" style="font-size: 11px;">2021</a> <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/APP/" style="font-size: 10px;">APP</a> <a href="/tags/ARTS/" style="font-size: 18px;">ARTS</a> <a href="/tags/Algorithm/" style="font-size: 18px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Angularjs/" style="font-size: 10px;">Angularjs</a> <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/BSD/" style="font-size: 10px;">BSD</a> <a href="/tags/BT/" style="font-size: 10px;">BT</a> <a href="/tags/BrowserSync/" style="font-size: 10px;">BrowserSync</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Creative-Commons/" style="font-size: 10px;">Creative Commons</a> <a href="/tags/D2/" style="font-size: 10px;">D2</a> <a href="/tags/D3/" style="font-size: 10px;">D3</a> <a href="/tags/DOM/" style="font-size: 12px;">DOM</a> <a href="/tags/Data-Visualization/" style="font-size: 10px;">Data Visualization</a> <a href="/tags/ECMAScript/" style="font-size: 11px;">ECMAScript</a> <a href="/tags/ES6/" style="font-size: 11px;">ES6</a> <a href="/tags/Echarts/" style="font-size: 10px;">Echarts</a> <a href="/tags/FE/" style="font-size: 10px;">FE</a> <a href="/tags/GPL/" style="font-size: 10px;">GPL</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTTP/" style="font-size: 12px;">HTTP</a> <a href="/tags/JavaScript/" style="font-size: 16px;">JavaScript</a> <a href="/tags/Kindle/" style="font-size: 10px;">Kindle</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MIT/" style="font-size: 10px;">MIT</a> <a href="/tags/Mozila/" style="font-size: 10px;">Mozila</a> <a href="/tags/Next/" style="font-size: 11px;">Next</a> <a href="/tags/React/" style="font-size: 12px;">React</a> <a href="/tags/React-Router/" style="font-size: 10px;">React Router</a> <a href="/tags/Reactjs/" style="font-size: 10px;">Reactjs</a> <a href="/tags/Redux/" style="font-size: 10px;">Redux</a> <a href="/tags/Review/" style="font-size: 18px;">Review</a> <a href="/tags/SEE-Conf/" style="font-size: 10px;">SEE Conf</a> <a href="/tags/SMART%E6%B3%95%E5%88%99/" style="font-size: 10px;">SMART法则</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/Share/" style="font-size: 18px;">Share</a> <a href="/tags/Spec/" style="font-size: 11px;">Spec</a> <a href="/tags/SublimeLInter/" style="font-size: 10px;">SublimeLInter</a> <a href="/tags/Technique/" style="font-size: 18px;">Technique</a> <a href="/tags/URL/" style="font-size: 11px;">URL</a> <a href="/tags/Virtual-DOM/" style="font-size: 10px;">Virtual DOM</a> <a href="/tags/WWW/" style="font-size: 11px;">WWW</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Web-%E5%AE%89%E5%85%A8-%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">Web, 安全, 前端</a> <a href="/tags/absolute/" style="font-size: 10px;">absolute</a> <a href="/tags/ag-grid/" style="font-size: 10px;">ag-grid</a> <a href="/tags/angularjs/" style="font-size: 15px;">angularjs</a> <a href="/tags/background/" style="font-size: 10px;">background</a> <a href="/tags/baidumap/" style="font-size: 10px;">baidumap</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/cli/" style="font-size: 10px;">cli</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/custom/" style="font-size: 10px;">custom</a> <a href="/tags/d2/" style="font-size: 10px;">d2</a> <a href="/tags/data/" style="font-size: 10px;">data</a> <a href="/tags/default/" style="font-size: 10px;">default</a> <a href="/tags/echarts/" style="font-size: 10px;">echarts</a> <a href="/tags/editor/" style="font-size: 10px;">editor</a> <a href="/tags/editorconfig/" style="font-size: 10px;">editorconfig</a> <a href="/tags/es5/" style="font-size: 10px;">es5</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/eslint/" style="font-size: 11px;">eslint</a> <a href="/tags/essential/" style="font-size: 10px;">essential</a> <a href="/tags/export/" style="font-size: 10px;">export</a> <a href="/tags/flexbox/" style="font-size: 11px;">flexbox</a> <a href="/tags/float/" style="font-size: 10px;">float</a> <a href="/tags/git/" style="font-size: 11px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/gitignore/" style="font-size: 10px;">gitignore</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/grid/" style="font-size: 10px;">grid</a> <a href="/tags/hexo/" style="font-size: 11px;">hexo</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/html%E5%85%A5%E9%97%A8/" style="font-size: 10px;">html入门</a> <a href="/tags/html%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">html学习</a> <a href="/tags/i18next/" style="font-size: 11px;">i18next</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/import/" style="font-size: 10px;">import</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/jsconf/" style="font-size: 10px;">jsconf</a> <a href="/tags/jsdoc/" style="font-size: 10px;">jsdoc</a> <a href="/tags/license/" style="font-size: 15px;">license</a> <a href="/tags/linux/" style="font-size: 13px;">linux</a> <a href="/tags/loader/" style="font-size: 10px;">loader</a> <a href="/tags/loading/" style="font-size: 10px;">loading</a> <a href="/tags/localStorage/" style="font-size: 10px;">localStorage</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/map/" style="font-size: 10px;">map</a> <a href="/tags/module/" style="font-size: 10px;">module</a> <a href="/tags/multi-accout/" style="font-size: 10px;">multi accout</a> <a href="/tags/named/" style="font-size: 10px;">named</a> <a href="/tags/new/" style="font-size: 10px;">new</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/placement/" style="font-size: 10px;">placement</a> <a href="/tags/prettier/" style="font-size: 10px;">prettier</a> <a href="/tags/priciple/" style="font-size: 10px;">priciple</a> <a href="/tags/quirks/" style="font-size: 10px;">quirks</a> <a href="/tags/recommend/" style="font-size: 10px;">recommend</a> <a href="/tags/remote/" style="font-size: 10px;">remote</a> <a href="/tags/search/" style="font-size: 10px;">search</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/sessionStorage/" style="font-size: 10px;">sessionStorage</a> <a href="/tags/share/" style="font-size: 10px;">share</a> <a href="/tags/ssh/" style="font-size: 11px;">ssh</a> <a href="/tags/standard/" style="font-size: 10px;">standard</a> <a href="/tags/sublime/" style="font-size: 11px;">sublime</a> <a href="/tags/sublime-Text-3/" style="font-size: 10px;">sublime Text 3</a> <a href="/tags/table/" style="font-size: 10px;">table</a> <a href="/tags/tag/" style="font-size: 10px;">tag</a> <a href="/tags/theme/" style="font-size: 10px;">theme</a> <a href="/tags/url/" style="font-size: 10px;">url</a> <a href="/tags/visualization/" style="font-size: 10px;">visualization</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/web-component/" style="font-size: 10px;">web component</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/web%E7%BB%84%E4%BB%B6/" style="font-size: 10px;">web组件</a> <a href="/tags/wordpress/" style="font-size: 10px;">wordpress</a> <a href="/tags/yarn/" style="font-size: 10px;">yarn</a> <a href="/tags/%E4%B8%89%E6%A0%8F/" style="font-size: 10px;">三栏</a> <a href="/tags/%E4%B8%8B%E8%BD%BD/" style="font-size: 10px;">下载</a> <a href="/tags/%E4%B9%A6%E5%8D%95/" style="font-size: 17px;">书单</a> <a href="/tags/%E4%B9%A6%E6%A0%BC%E5%89%8D%E7%AB%AF/" style="font-size: 11px;">书格前端</a> <a href="/tags/%E4%BC%9A%E8%AE%AE/" style="font-size: 12px;">会议</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 13px;">入门</a> <a href="/tags/%E5%85%B1%E4%BA%AB%E6%A1%8C%E9%9D%A2/" style="font-size: 10px;">共享桌面</a> <a href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size: 10px;">关键字</a> <a href="/tags/%E5%85%BB%E7%94%9F/" style="font-size: 10px;">养生</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 13px;">前端</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 20px;">前端开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-angular-pnpm/" style="font-size: 10px;">前端开发, angular, pnpm</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%EF%BC%8C%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE/" style="font-size: 10px;">前端开发，百度地图</a> <a href="/tags/%E5%8D%87%E7%BA%A7/" style="font-size: 10px;">升级</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">博客</a> <a href="/tags/%E5%8E%9F%E5%9E%8B/" style="font-size: 10px;">原型</a> <a href="/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/" style="font-size: 10px;">原型链</a> <a href="/tags/%E5%8E%9F%E7%90%86/" style="font-size: 12px;">原理</a> <a href="/tags/%E5%8F%8C%E9%A3%9E%E7%BF%BC/" style="font-size: 10px;">双飞翼</a> <a href="/tags/%E5%8F%AA%E7%AE%A1%E5%8E%BB%E5%81%9A/" style="font-size: 10px;">只管去做</a> <a href="/tags/%E5%9B%A2%E9%98%9F/" style="font-size: 10px;">团队</a> <a href="/tags/%E5%9B%A2%E9%98%9F%E5%88%86%E4%BA%AB/" style="font-size: 10px;">团队分享</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 11px;">国际化</a> <a href="/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 10px;">图表</a> <a href="/tags/%E5%9C%A3%E6%9D%AF/" style="font-size: 10px;">圣杯</a> <a href="/tags/%E5%A4%9A%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">多语言</a> <a href="/tags/%E5%A4%B4%E5%83%8F/" style="font-size: 10px;">头像</a> <a href="/tags/%E5%AD%98%E5%82%A8/" style="font-size: 10px;">存储</a> <a href="/tags/%E5%AE%89%E5%8D%93/" style="font-size: 10px;">安卓</a> <a href="/tags/%E5%AE%9E%E6%88%98/" style="font-size: 10px;">实战</a> <a href="/tags/%E5%AF%B9%E8%B1%A1/" style="font-size: 10px;">对象</a> <a href="/tags/%E5%B0%91%E5%8D%B3%E6%98%AF%E5%A4%9A/" style="font-size: 10px;">少即是多</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 19px;">工具</a> <a href="/tags/%E5%B8%83%E5%B1%80/" style="font-size: 10px;">布局</a> <a href="/tags/%E5%B9%B4%E5%BA%A6/" style="font-size: 10px;">年度</a> <a href="/tags/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE/" style="font-size: 15px;">开源协议</a> <a href="/tags/%E5%BC%B9%E6%80%A7%E7%9B%92/" style="font-size: 11px;">弹性盒</a> <a href="/tags/%E6%80%AA%E5%BC%82%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">怪异模式</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 12px;">总结</a> <a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 10px;">感想</a> <a href="/tags/%E6%8C%87%E5%8D%97/" style="font-size: 13px;">指南</a> <a href="/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/" style="font-size: 10px;">搜索引擎</a> <a href="/tags/%E6%95%88%E7%8E%87/" style="font-size: 11px;">效率</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 10px;">教程</a> <a href="/tags/%E6%95%B0%E6%8D%AE/" style="font-size: 10px;">数据</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 11px;">数据可视化</a> <a href="/tags/%E6%96%B9%E6%B3%95/" style="font-size: 12px;">方法</a> <a href="/tags/%E6%97%85%E6%B8%B8/" style="font-size: 10px;">旅游</a> <a href="/tags/%E6%97%A5%E6%9C%AC/" style="font-size: 10px;">日本</a> <a href="/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" style="font-size: 10px;">最佳实践</a> <a href="/tags/%E6%A0%87%E5%87%86%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">标准模式</a> <a href="/tags/%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">概念</a> <a href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 11px;">模块化</a> <a href="/tags/%E6%B5%AE%E5%8A%A8/" style="font-size: 10px;">浮动</a> <a href="/tags/%E6%B8%B8%E8%AE%B0/" style="font-size: 10px;">游记</a> <a href="/tags/%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83/" style="font-size: 10px;">生产环境</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 12px;">生活</a> <a href="/tags/%E7%94%B5%E5%8A%A8%E8%BD%A6/" style="font-size: 10px;">电动车</a> <a href="/tags/%E7%9B%AE%E6%A0%87/" style="font-size: 11px;">目标</a> <a href="/tags/%E7%9F%A5%E4%B9%8E%E4%B8%93%E6%A0%8F/" style="font-size: 11px;">知乎专栏</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 12px;">笔记</a> <a href="/tags/%E7%AE%80%E4%BB%8B/" style="font-size: 10px;">简介</a> <a href="/tags/%E7%BB%84%E4%BB%B6/" style="font-size: 11px;">组件</a> <a href="/tags/%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D/" style="font-size: 10px;">绝对定位</a> <a href="/tags/%E7%BB%A7%E6%89%BF/" style="font-size: 10px;">继承</a> <a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 10px;">缓存</a> <a href="/tags/%E7%BD%91%E6%A0%BC/" style="font-size: 10px;">网格</a> <a href="/tags/%E8%84%9A%E6%89%8B%E6%9E%B6/" style="font-size: 10px;">脚手架</a> <a href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89/" style="font-size: 10px;">自定义</a> <a href="/tags/%E8%99%9A%E6%8B%9FDOM/" style="font-size: 10px;">虚拟DOM</a> <a href="/tags/%E8%A1%A8%E6%A0%BC/" style="font-size: 10px;">表格</a> <a href="/tags/%E8%A7%84%E8%8C%83/" style="font-size: 12px;">规范</a> <a href="/tags/%E8%AE%BA%E5%9D%9B/" style="font-size: 10px;">论坛</a> <a href="/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 19px;">读书</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">读书笔记</a> <a href="/tags/%E8%B7%AF%E7%94%B1/" style="font-size: 10px;">路由</a> <a href="/tags/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/" style="font-size: 10px;">远程控制</a> <a href="/tags/%E9%80%9F%E5%BA%A6/" style="font-size: 10px;">速度</a> <a href="/tags/%E9%94%9A/" style="font-size: 10px;">锚</a> <a href="/tags/%E9%98%85%E8%AF%BB/" style="font-size: 19px;">阅读</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 10px;">项目</a> <a href="/tags/%E9%A5%AE%E9%A3%9F/" style="font-size: 10px;">饮食</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/17/angular-monorepo-project-by-pnpm/">pnpm在angular的monorepo项目中的应用</a>
          </li>
        
          <li>
            <a href="/2022/01/03/2021-annual-sumary/">2021年的年度总结</a>
          </li>
        
          <li>
            <a href="/2021/08/24/web-develop-security/">Web安全开发几个注意点</a>
          </li>
        
          <li>
            <a href="/2021/01/02/reading-note-just-do-it/">只管去做读书笔记</a>
          </li>
        
          <li>
            <a href="/2021/01/01/reading-list-2021/">2021年计划阅读清单</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Perry<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>